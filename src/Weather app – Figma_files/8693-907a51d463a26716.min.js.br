"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c94a3cfd-cc62-593b-a0dd-e6e1c3c94811")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8693],{235027:(e,t,a)=>{a.d(t,{a0:()=>r,bV:()=>i,jy:()=>l,sk:()=>s,xC:()=>n,xO:()=>o});let n="browse_explore_list--widgetTilesGridContainer--k7aKh browse_widgets_view--widgetTilesGridContainer--t5-lL",l="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",i="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",r="browse_explore_list--categorySectionHeaderContainer--WiX1N",o="browse_explore_list--pluginCategorySectionHeaderPadding--hW6gC",s="browse_explore_list--resourcesGrid--BGQAu"},292954:(e,t,a)=>{a.d(t,{$I:()=>h,D5:()=>m,EQ:()=>v,MY:()=>b,Mm:()=>E,Mo:()=>o,ON:()=>l,X6:()=>s,Y:()=>w,hW:()=>n,jE:()=>i,n_:()=>f,pz:()=>r,rb:()=>u,sk:()=>g,vC:()=>c,w0:()=>_,wP:()=>d,xQ:()=>p});let n="browse_templates_modal--figjamModalAnimated--DZYbi",l="browse_templates_modal--searchBar--XLS5K",i="browse_templates_modal--modalContent--xJKzJ",r="browse_templates_modal--sidebar--Ay4f5",o="browse_templates_modal--unselectedSidebarItem--8k5Hx browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",s="browse_templates_modal--selectedSidebarItem--riSyU browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",c="browse_templates_modal--figmaCuratedHeading--NrYwZ browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",m="browse_templates_modal--communitySidebarContainer--otHCt",d="browse_templates_modal--linkIcon--DOZfF",u="browse_templates_modal--mainContent---sUBI",p="browse_templates_modal--categoryPreviewRow--wRxQO",_="browse_templates_modal--categoryPreviewHeader---gWg3",h="browse_templates_modal--categoryPreviewTitle--xg13c text--fontPos13--xW8hS text--_fontBase--QdLsd",g="browse_templates_modal--resourcesGrid--Y-fVk",f="browse_templates_modal--hoverOverlay--sFj3y",b="browse_templates_modal--teamTemplatesHeaderButton--n6rDU",E="browse_templates_modal--bgLoading--Sz6so",v="browse_templates_modal--bgLoadingLight--Yl6dc",w="browse_templates_modal--bgLoadingLightest--9ceKP"},310885:(e,t,a)=>{a.d(t,{Kk:()=>o,XI:()=>d,iG:()=>n,iU:()=>c,m5:()=>s,o1:()=>m,rV:()=>r,s:()=>l,xT:()=>i});let n="notification--centeredContainer--KOKEL",l="notification--topCenterNotification---nbgh notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",i="notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",r="notification--bottomRightNotificationHelpIconHidden--plZlM notification--bottomRightNotification--i1z7X notification--notification--Q5PkV text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",o="notification--icon--ZWNx5",s="notification--iconError--aqnJU notification--icon--ZWNx5",c="notification--message--6GSx7",m="notification--actions--GUX-p",d="notification--action--v-pvn"},663691:(e,t,a)=>{a.d(t,{a:()=>l,t:()=>n});let n="auth_iframe_external_options",l="google_one_tap_login"},694778:(e,t,a)=>{a.d(t,{n:()=>o});var n=a(915440),l=a(279453),i=a(556261);if(443==a.j)var r=a(234587);function o(e){let t=(0,i.rs)({unwrapResult:!0}),a=(0,r.sy)(t?.tier),o=(0,n.Rs)(l.zCd,{projectId:e},{enabled:!!e}).transform(({project:e})=>e);return{isLoading:"loading"===o.status,canCreateDesignFile:!!o.data?.canCreateDesignFile,canCreateFigjamFile:!!o.data?.canCreateFigjamFile,canCreateSlidesFile:!!o.data?.canCreateSlidesFile,canShowCreateSitesFile:a}}},611886:(e,t,a)=>{a.d(t,{Q4:()=>k,gE:()=>I,u5:()=>C});var n=a(776250),l=a(511617),i=a(737947),r=a(966712),o=a(563706),s=a(27087),c=a(939863),m=a(667231),d=a(392592),u=a(749949),p=a(837324),_=a(291861),h=a(107877),g=a(935308),f=a(750668),b=a(132135),E=a(935757),v=a(555328),w=a(809073);async function y(e,t,a,n,l,i){let o=[],s=null;if((0,r.kc)().ps_benchmark)try{s=await (0,g.nm)(!0)(a),o=(0,f.F)(n,t,s)}catch(t){let e=t?.data?.message||(0,c.t)("file_browser.error_try_again");a(d.F.enqueue({message:e,type:"error"}))}else o=(0,f.F)(n,t,{plansByUserId:{},teams:[],orgs:[]});let m=(n.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in n.authedUsers.byId).length>1;if(o.length>1||m){let a=(0,p.JJ)(t.viewer_mode);e({onSelectWorkspace:l,workspaces:o.map(e=>(0,_.y)(e,a,n,s,i)),mode:"new_file"})}else(0,r.kc)().ps_benchmark?l(o[0]):l()}let I=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1})=>a=>async(c,d)=>{let p=d();await y(e,a,c,p,function(e){let d={headers:{...s.Ay.defaults.headers}},_={};e&&(d.headers["X-Figma-User-ID"]=e.userId,_.org_id=e.orgId,(0,r.kc)().ps_benchmark&&(_.team_id=e.teamId)),!0===t.adminReviewerOverride&&(_.admin_reviewer_override=!0),s.Ay.post(`/api/hub_files/v2/${a.id}/copy`,_,d).then(({data:r})=>{let s=r.meta,d=(0,v.m3)(a),g=!0!==d?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,n.sx)(h.M5.HUB_FILE_DUPLICATED,{hubFileId:a.id,figFileKey:s.key,isMonetized:d,paidStatus:g,searchSessionId:(0,u.w)(p),file_team_id:_.team_id,org_id:_.org_id,file_folder_id:s.folder_id}),"whiteboard"===s.editor_type&&c((0,m.Hx)({storeInRecentsKey:w.$A.FigJam,id:a.id,type:w.vt.CommunityResource}));let f=(0,b.to)(s);f=(0,l.dR)(f,{"is-community-duplicate":"1",fuid:e?.userId||""}),!0===t.isFreemiumPreview&&(f=(0,l.dR)(f,{"is-freemium-preview":"1"})),i.Ay.redirect(f,o.rr?void 0:"_blank")})})},C=e=>t=>async(a,n)=>{let r=n();await y(e,t,a,r,function(e){let a=`/slides/new?slide-template-library-key=${t.library_key}`;e&&((0,E.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,l.dR)(a,{fuid:e.userId})),i.Ay.redirect(a,o.rr?void 0:"_blank")})},k=e=>t=>async(a,n)=>{let r=n();await y(e,t,a,r,function(e){let a=`/file/new?library-hub-file-id=${t.id}`;e&&((0,E.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,l.dR)(a,{fuid:e.userId})),i.Ay.redirect(a,o.rr?void 0:"_blank")},!0)}},317790:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(188507),l=a(776250),i=a(611886),r=a(351226),o=a(662275),s=a(555328),c=a(749949);function m(e,t=!1){let a=(0,n.wA)(),d=(0,c.J)();if(!(0,s.U)(e))return()=>{};let u=i.gE(t=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:e.id,searchSessionId:d}),a((0,o.to)({type:r._,data:{payload:t}}))},{isFreemiumPreview:t});return()=>{a(u(e))}}},838e3:(e,t,a)=>{a.d(t,{Q:()=>g,S:()=>f});var n=a(130097),l=a(711525),i=a(553716),r=a(27087),o=a(881388),s=a(939863),c=a(392592),m=a(279453),d=a(320741),u=a(877627),p=a(280945),_=a(980820),h=a(507877);let g=(0,_.nF)(async(e,t,{loadingKey:a})=>{let r=!1;try{r=!!(0,l.oA)((await (0,n.Ek)(m.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let n;n=r?p.L.claimDeviceFile({fileKey:t.file_key}):u.Uy.claimTryFile({fileKey:t.file_key}),(0,d.N)(n,e,a);let{data:l}=await n,{save_location:i,folder_name:o,org_id:m}=l.meta,{user:_,currentUserOrgId:g,selectedView:f}=e.getState(),b=(0,s.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&o&&(b=(0,s.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:o})),m&&m!==g&&_){let t={userId:_.id,orgId:m};e.dispatch(h._l({workspace:t,view:f}))}e.dispatch(c.F.enqueue({message:b}))}catch(t){e.dispatch(o.s.error("Unable to save file. Please try again later."))}}),f=(0,_.nF)(async(e,{userName:t,file_key:a},{loadingKey:n})=>{try{await r.Ay.put(`/api/try/file/${a}`,{name:(0,s.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},611047:(e,t,a)=>{a.d(t,{LP:()=>d,qQ:()=>n,qv:()=>u});var n,l=a(411855),i=a(776250),r=a(966712),o=a(96328),s=a(939863),c=a(809840),m=a(99506);let d="cover";var u=(e=>(e.COMPONENT_PUBLISHING="component_publishing",e.VIDEO="video",e.PASSWORD_PROTECTION="password_protection",e.AUDIO="audio",e.UNLIMITED_PAGES="unlimited_pages",e.PROTOTYPE_ONLY_LINKS="prototype_only_links",e.OPEN_SESSIONS="open_sessions",e.UNLIMITED_PROJECTS="unlimited_projects",e.PRIVATE_PROJECTS="private_projects",e.UNLIMITED_FILES="unlimited_files",e))(u||{});let p={cover:{onboardingKey:d,imgSrc:(0,r.ck)("cade95b7d3141da5e4c22a879de339d5b57b05aa"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.description")),hoverTitle:null},password_protection:{onboardingKey:"password_protection",imgSrc:(0,r.ck)("b56379c61007d4c119dc3a32fc936ac07f5d13d5"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.hover_text"))},component_publishing:{onboardingKey:"component_publishing",imgSrc:(0,r.ck)("1138b4f97bb51f61ed9b2bac008de9038dfbcf75"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.hover_text"))},audio:{onboardingKey:"audio",imgSrc:(0,r.ck)("312167c9a97cd378f0a20d09d03376b27283dae9"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.hover_text"))},open_sessions:{onboardingKey:"open_sessions",imgSrc:(0,r.ck)("1ee3e88ccb237a207e896dba4a67af081259590d"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.hover_text"))},unlimited_pages:{onboardingKey:"unlimited_pages",imgSrc:(0,r.ck)("cdb490f97220f8598d6b342c873569c68ac2370e"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.hover_text"))},video:{onboardingKey:"video",imgSrc:(0,r.ck)("0e9be58e80f8d577fc4b1028f07a903bca68c970"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.hover_text"))}},_={component_publishing:"seen_pro_onboarding_component_publishing_overlay",video:"seen_pro_onboarding_video_overlay",password_protection:"seen_pro_onboarding_password_protection_overlay",audio:"seen_pro_onboarding_audio_overlay",unlimited_pages:"seen_pro_onboarding_unlimited_pages_overlay",prototype_only_links:"seen_pro_onboarding_prototype_only_links_overlay",open_sessions:"seen_pro_onboarding_open_sessions_overlay",unlimited_files:"seen_pro_onboarding_unlimited_files_overlay",unlimited_projects:"seen_pro_onboarding_unlimited_projects_overlay",private_projects:"seen_pro_onboarding_private_projects_overlay"};(e=>{e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID="Pro Trials V3: Actively Triggered Onboarding Blocked",e.getOnboardingStepUserFlag=function(e){return _[e]},e.getOnboardingStepTrackingContext=function(e){return`Pro Trials V3 Onboarding: ${(0,o.vE)(e)}`},e.getOnboardingStepTriggerEventId=function(e){return`triggered_pro_trials_v3_${e}_onboarding`},e.trackActivelyTriggeredOnboardingStepBlocked=function(t,a){(0,i.sx)(e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID,{blockedOnboardingFeature:a,blockingOverlayId:t})},e.getOnboardingCardsStackContentProps=function({editorType:e,isVoiceEnabled:t,isWorkshopModeEnabled:a}){let n=[d,"password_protection","component_publishing","unlimited_pages","video"];t&&n.push("audio");let l=[d,"password_protection"];return t&&l.push("audio"),a&&l.push("open_sessions"),(({[m._Y.DESIGN]:n,[m._Y.SLIDES]:n,[m._Y.SITES]:n,[m._Y.COOPER]:n,[m._Y.WHITEBOARD]:l})[e]||[]).map(e=>p[e])}})(n||(n={}))},611075:(e,t,a)=>{a.d(t,{c:()=>u,y:()=>p});var n=a(411855),l=a(737947),i=a(966712),r=a(877432),o=a(939863),s=a(265746),c=a(696808),m=a(387530),d=a(206645);class u extends n.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,i.ck)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),a=await fetch(t,{signal:e,cache:"no-cache"}),n=await a.json(),l={finished:n.finished,warningDurationMs:Number(n.warning_ms),notifDurationMs:Number(n.notif_ms),pollIntervalMinutes:Number(n.poll_interval_minutes),downtimeStartDate:new Date(n.timestamp+" UTC"),minLengthMinutes:Number(n.estimated_length_min),maxLengthMinutes:Number(n.estimated_length_max),helpcenterUrl:n.helpcenter_url};return(0,i.kc)().display_downtime_banner_force&&(l.warningDurationMs*=1e3,l.notifDurationMs*=1e3),"hostname"in n&&(l={...l,renderOnHostname:n.hostname}),l},this.onTick=()=>{null!=this.payload&&this.props.dispatch(m.Z.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,r.fm)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function p(e){let{dispatch:t,downtime:a}=e,r=n.useCallback(e=>()=>{t(e)},[t]),u=n.useCallback((e,t)=>()=>{l.Ay.unsafeRedirect(e,"_blank"),r(t)},[r]),p=n.useCallback(e=>(0,o.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),_=n.useMemo(()=>(0,o.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),h=n.useRef(e.notifications),g=n.useCallback(()=>{h.current.length>0&&t(c.Q.dequeue({type:s._.DOWNTIME}))},[t,h]);return n.useEffect(()=>{let{payload:e,status:n,hidingDowntimeNotif:l,notifMinutesRemaining:o}=a;if((0,i.kc)().display_downtime_banner){switch(n){case d.A.Imminent:case d.A.Warning:if(e&&null!=o&&l!==d.y.warningHidden){let a=p(o),n=u(e.helpcenterUrl,m.Z.hideWarningNotif()),l=r(m.Z.hideWarningNotif());t(c.Q.dequeue({type:s._.DOWNTIME})),t(c.Q.enqueue({notification:{type:s._.DOWNTIME,message:a,acceptCallback:n,dismissCallback:l}}))}break;case d.A.Ongoing:if(e&&l!==d.y.ongoingHidden){let a=u(e.helpcenterUrl,m.Z.hideOngoingNotif()),n=r(m.Z.hideOngoingNotif());t(c.Q.dequeue({type:s._.DOWNTIME})),t(c.Q.enqueue({notification:{type:s._.DOWNTIME,message:_,acceptCallback:a,dismissCallback:n}}))}break;case d.A.Finished:g()}return()=>{g()}}},[a,t,p,u,r,_,g]),null}u.displayName="DowntimePoller"},214940:(e,t,a)=>{a.d(t,{Z:()=>eU});var n,l=a(411855),i=a(91408),r=a(563706),o=a(466636),s=a(410424),c=a(672517),m=a(27703),d=a(820642),u=a(99506),p=a(555328),_=a(637590),h=a(927625),g=a(894728),f=a(188507),b=a(776250),E=a(572206),v=a(654923),w=a(837324),y=a(654034),I=a(498083),C=a(193212),k=a(94500),T=a(433861),S=a(238837),F=a(585091),N=a(343887),x=a(75395),L=a(536825),A=a(927457),P=a(860601),R=a(268537),M=a(459826),D=a(638889),B=a(163023),O=a(46481),U=a(154254),z=a(939863),G=a(392592),j=a(317790),H=a(975350),W=a(738269),V=a(507877),Z=a(498606),$=a(143678),Y=a(728587),K=a(405328),Q=a(250118),q=a(109546),J=a(112512),X=a(720248),ee=a(671250),et=a(349307),ea=a(179544),en=a(98285),el=a(539954);(e=>{let t;e.BottomRightContainer=function({children:e}){return l.createElement("div",{className:q.Vl},e)},e.BottomLeftContainer=function({children:e}){return l.createElement("div",{className:q.Ci},e)},e.ButtonContainer=l.forwardRef(function({children:e},t){return l.createElement("div",{ref:t,className:q.bS},e)}),e.Divider=function(){return l.createElement("div",{className:q.w5})},e.FullscreenButton=function({toggleFullscreen:e,isFullscreen:t}){return l.createElement("div",{className:q.Y5},l.createElement(B.B,{svg:t?ee.A:X.A,onClick:e,className:q.xw,title:t?(0,z.t)("community.hub_file_viewer.collapse_file_preview"):(0,z.t)("community.hub_file_viewer.expand_file_preview"),ariaLabel:t?(0,z.t)("community.hub_file_viewer.collapse_file_preview"):(0,z.t)("community.hub_file_viewer.expand_file_preview"),role:"img",dataTestId:"hub-file-viewer-fullscreen-icon"}))},e.GetFreePreviewButton=function(e){let t=(0,j.A)(e.hubFile,!0);return l.createElement(c.fu,{name:$.e0.COMMUNITY_HUB_FILE_GET_FREE_PREVIEW_BUTTON},l.createElement(c.$z,{onClick:t,dataTestId:"community-get-free-preview-button",className:q.GW},(0,z.tx)("community.buyer.get_free_preview")))};let a="HUB_FILE_EMBED_PAGES_BUTTON_DROPDOWN_TYPE";function n(e,t,a,n){let i=l.useCallback(a=>n=>{n?.stopPropagation(),(0,b.sx)("Hub File Viewer Zoom In",{hubFileId:e,source:a}),t(2,k.UG)},[e,t]);return{adjustZoomInFactory:i,adjustZoomOutFactory:l.useCallback(a=>n=>{n?.stopPropagation(),(0,b.sx)("Hub File Viewer Zoom Out",{hubFileId:e,source:a}),t(.5,k.UG)},[e,t]),setZoomFactory:l.useCallback((t,n)=>l=>{l?.stopPropagation(),(0,b.sx)("Hub File Viewer Set Zoom",{hubFileId:e,scale:t,source:n}),a(t,k.UG)},[e,a]),resetZoomToFitCanvasContentFactory:l.useCallback(t=>a=>{a?.stopPropagation(),(0,b.sx)("Hub File Viewer Zoom To Fit",{hubFileId:e,source:t}),n()},[e,n])}}e.PagesButton=function(e){let t=(0,f.wA)(),n=(0,f.d4)(e=>e.dropdownShown),i=n?.type===a,r=e.pages&&e.pages.length>1;if(l.useEffect(()=>{r&&setTimeout(()=>{t(V.mT({type:a}))},1e3)},[]),!r)return null;let o=e.pages.find(t=>t.id===e.currentPageId),s=o?.name||e.pages[0]?.name,c=s?l.createElement(l.Fragment,null,(0,z.tx)("community.hub_file_viewer.page_name",{pageHeader:l.createElement("span",{className:q.Z7},(0,z.t)("community.hub_file_viewer.page")),pageName:s})):(0,z.t)("community.hub_file_viewer.pages");return l.createElement("div",{className:i?q.Sm:q.ir,role:"button",tabIndex:0,onClick:e=>{if(e.stopPropagation(),i){t(W.oB());return}t(W.j7({type:a}))},onMouseDown:e=>e.stopPropagation()},l.createElement("div",{className:q._f},c),l.createElement("div",{className:q.dN},l.createElement(B.B,{svg:J.A,className:q.OW,title:(0,z.t)("community.hub_file_viewer.view_file_pages"),ariaLabel:(0,z.t)("community.hub_file_viewer.view_file_pages"),role:"img"})))},e.PagesDropdown=function(e){let t=(0,f.wA)(),n=(0,f.d4)(e=>e.dropdownShown?.type===a),i={maxHeight:`${e.viewerHeight-120}px`},r=a=>{a&&(e.setCurrentPageId(a),t(H.UU()),(0,b.sx)("Hub File Viewer Change Page",{hubFileId:e.hubFile.id,pageId:a}))};return n?l.createElement(R.ms,{className:q.Oe,style:i,recordingKey:"hub_file_embed_pages_dropdown"},e.pages.map(t=>l.createElement(R.rr,{key:t.id,checked:e.currentPageId===t.id,onClick:e=>{e.stopPropagation(),r(t.id)}},l.createElement("div",{className:q.VM},t.name)))):null},e.HubFileZoomButton=function(t){let a=(0,f.wA)(),r=(0,f.d4)(e=>e.dropdownShown?.type===i),{adjustZoomInFactory:o,adjustZoomOutFactory:s}=n(t.hubFile.id,t.adjustZoom,t.setZoom,t.resetZoomToFitCanvasContent),c=Math.round(100*t.currentZoomScale),m=c.toString().length;return l.createElement(l.Fragment,null,l.createElement(N.K,{"aria-label":(0,z.t)("fullscreen_actions.zoom-out"),onClick:s("clickFromViewerButtons"),htmlAttributes:{"data-tooltip-type":Z.Ib.LOOKUP,"data-tooltip":(0,z.t)("fullscreen_actions.zoom-out")}},l.createElement(O.U,{svg:et.A,fallbackSvg:ea.A},l.createElement(L.O,null))),l.createElement(e.Divider,null),l.createElement("div",{className:r?q.hF:q.f5,style:{width:m<3?"66px":"82px"},role:"button",tabIndex:0,onClick:e=>{if(e.stopPropagation(),r){a(W.oB());return}a(W.j7({type:i}))}},(0,z.tx)("community.hub_file_viewer.zoom_percent",{zoomPercent:c}),l.createElement("div",{className:q.dN},l.createElement(B.B,{svg:J.A,className:q.OW,title:(0,z.t)("community.hub_file_viewer.select_zoom_level"),ariaLabel:(0,z.t)("community.hub_file_viewer.select_zoom_level"),role:"img"}))),l.createElement(e.Divider,null),l.createElement(N.K,{"aria-label":(0,z.t)("fullscreen_actions.zoom-in"),onClick:o("clickFromViewerButtons"),htmlAttributes:{"data-tooltip-type":Z.Ib.LOOKUP,"data-tooltip":(0,z.t)("fullscreen_actions.zoom-in")}},l.createElement(O.U,{className:q.sy,svg:en.A,fallbackSvg:el.A},l.createElement(A.e,null))))};let i="HUB_FILE_EMBED_ZOOM_BUTTON_DROPDOWN";(e=>{e.clickFromDropdown="clickFromDropdown",e.clickFromViewerButtons="clickFromViewerButtons",e.keyboardShortcut="keyboardShortcut",e.userInput="userInput"})(t||(t={})),e.HubFileZoomButtonDropdown=function({hubFile:e,currentZoomScale:t,adjustZoom:a,setZoom:r,resetZoomToFitCanvasContent:o}){let s=(0,f.wA)(),{adjustZoomInFactory:c,adjustZoomOutFactory:m,setZoomFactory:d,resetZoomToFitCanvasContentFactory:u}=n(e.id,a,r,o),p=l.useCallback(e=>{document.activeElement instanceof HTMLInputElement||("+"===e.key?c("keyboardShortcut")():"-"===e.key?m("keyboardShortcut")():"0"===e.key?d(1,"keyboardShortcut")():"1"===e.key&&u("keyboardShortcut")())},[c,m,u,d]);if((0,C.U3)("keydown",p),!(0,f.d4)(e=>e.dropdownShown?.type===i))return null;let _=t=>{t.endsWith("%")&&(t=t.substr(0,t.length-1));let a=-1;try{a=parseInt(t,10)}catch(e){}a>0&&((0,b.sx)("Hub File Viewer User Input Zoom Set",{hubFileId:e.id,source:"userInput",scale:a/100}),r(a/100,k.UG))};return l.createElement(R.ms,{className:q.tj,recordingKey:"hub_file_embed_zoom_dropdown"},l.createElement(R.c$,{className:q.zj},l.createElement(M.p,{className:q.OF,placeholderValue:`${Math.round(100*t)}%`,submit:e=>{_(e),s(W.oB())},cancel:P.lQ})),l.createElement(R.wv,null),l.createElement(R.c$,{onClick:c("clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_in"),l.createElement(D.S,{shortcut:"+",className:q.K8})),l.createElement(R.c$,{onClick:m("clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_out"),l.createElement(D.S,{shortcut:"-",className:q.K8})),l.createElement(R.c$,{onClick:u("clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_to_fit"),l.createElement(D.S,{shortcut:"1",className:q.K8})),l.createElement(R.c$,{onClick:d(.5,"clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_to",{percent:"50%"})),l.createElement(R.c$,{onClick:d(1,"clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_to",{percent:"100%"}),l.createElement(D.S,{shortcut:"0",className:q.K8})),l.createElement(R.c$,{onClick:d(2,"clickFromDropdown")},(0,z.tx)("community.hub_file_viewer.zoom_to",{percent:"200%"})))},e.PrototypeZoomButton=function(e){let t=(0,f.wA)(),a=(0,f.d4)(e=>e.dropdownShown?.type===K.A9),n=1;return e.viewer&&(n=e.getCurrentZoomScale()),l.createElement(x.E,{className:U.cx.bgTransparent.h100.$,onClick:e=>{if(e.stopPropagation(),a){t(W.oB());return}t(W.j7({type:K.A9}))}},l.createElement("div",{className:a?q.hF:q.f5},(0,z.tx)("community.hub_file_viewer.zoom_percent",{zoomPercent:Math.round(100*n)}),l.createElement("div",{className:q.dN},l.createElement(B.B,{svg:J.A,className:q.OW,title:(0,z.t)("community.hub_file_viewer.select_zoom_level"),ariaLabel:(0,z.t)("community.hub_file_viewer.select_zoom_level"),role:"img"}))))},e.PrototypeZoomDropdown=function(e){let t=(0,f.wA)(),a=(0,f.d4)(e=>e.dropdownShown?.type===K.A9),n=e.viewer.getPrototypeDeviceType(),i=(0,k._Q)(n),[r,o]=l.useState(()=>e.initialScalingMode??{viewportScalingMode:(0,k.qb)(i),contentScalingMode:"fixed"}),s=l.useCallback(t=>{let a={...r,...t.scalingInfo};o(a),e.viewer?.setScalingMode(a)},[e.viewer,r]),c=l.useCallback(e=>{if("z"===e.key||"Z"===e.key){if(document.activeElement instanceof HTMLInputElement)return;let a=(0,Q.Pz)(n),l=(0,Q.Ac)(r,a),i=a.findIndex(e=>e.scalingOptionId===l);-1===i?i=e.shiftKey?a.length-1:0:e.shiftKey?0===i?i=a.length-1:i--:i===a.length-1?i=0:i++;let o=a[i];s(o),t(G.F.clearAll()),t(G.F.enqueue({message:(0,z.t)("community.hub_file_viewer.zoom",{percent:(0,Q.GP)(o.scalingOptionId)})}))}},[t,n,r,s]);return((0,C.U3)("keydown",c),a)?l.createElement(Y.j,{showPoint:!1,dispatch:t,onSelectItem:e=>e.callback?.(),parentRect:e.targetRect,items:(0,K.NC)(t,r,Q.Yu.DEFAULT,void 0,n,s),className:q.J2}):null}})(n||(n={}));let ei=e=>{let t=l.useCallback((t,a=k.UG)=>{e?.port1.postMessage({type:F.cu.ADJUST_ZOOM,params:{scale:t,animationDuration:a}})},[e]),a=l.useCallback((t,a=k.UG)=>{e?.port1.postMessage({type:F.cu.SET_ZOOM,params:{scale:t,animationDuration:a}})},[e]);return{adjustZoom:t,setZoom:a,setCurrentPageId:l.useCallback(t=>{e?.port1.postMessage({type:F.cu.SET_CURRENT_PAGE_ID,params:{currentPageId:t}})},[e]),setCanvasSpaceCenter:l.useCallback((t,a=k.UG)=>{e?.port1.postMessage({type:F.cu.SET_CANVAS_SPACE_CENTER,params:{location:t,animationDuration:a}})},[e]),resetZoomToFitCanvasContent:l.useCallback(()=>{e?.port1.postMessage({type:F.cu.RESET_ZOOM_TO_FIT_CANVAS_CONTENT})},[e])}},er=e=>{let[t,a]=l.useState(1);return l.useEffect(()=>{if(!e)return;let t=e=>{e.data.viewerState?.viewport?.zoomScale&&a(e.data.viewerState.viewport.zoomScale)};return e.port1.addEventListener("message",t),e.port1.start(),()=>e.port1.removeEventListener("message",t)},[e]),t},eo=(e,t)=>{let a=l.useRef(T.t4),[n,i]=l.useState([]),[r,o]=l.useState(S.VL);return l.useEffect(()=>{if(!t)return;let l=t=>{t.viewport&&(a.current=function(e,t){let a=t.current?.getBoundingClientRect();return a?{x:0,y:0,width:a.width,height:a.height,offsetX:e.offset.x,offsetY:e.offset.y,zoomScale:e.zoomScale,isPanning:!1,isZooming:!1}:T.t4}(t.viewport,e)),t.pages&&(0===n.length&&t.pages[0]?.id&&o(t.pages[0].id),i(t.pages)),t.currentPageId&&o(t.currentPageId)},r=e=>{e.data.viewerState&&l(e.data.viewerState)};return t.port1.addEventListener("message",r),t.port1.start(),()=>t.port1.removeEventListener("message",r)},[e,t,n.length]),l.useMemo(()=>({getViewportInfo:()=>a.current,pages:n,currentPageId:r}),[n,r])},es=(e,t)=>{let{onMouseUp:a,onMouseDown:n,onMouseMove:i,onKeydown:r}=t,o=l.useCallback(e=>{if(e.data.canvasInteraction){let t=e.data.canvasInteraction.type,l=e.data.canvasInteraction.pt;"canvasMouseDown"===t?n(l):"canvasMouseUp"===t?a(l):("canvasMouseDrag"===t||"canvasMouseMove"===t)&&i(l)}else e.data.keydown&&r(e.data.keydown.key)},[n,i,a,r]);l.useEffect(()=>(e?.port1.addEventListener("message",o),e?.port1.start(),()=>e?.port1.removeEventListener("message",o)),[o,e?.port1])},ec=e=>{let[t,a]=l.useState("auto");return l.useEffect(()=>{e&&e.port1.postMessage({type:F.cu.SET_CURSOR_STYLE,params:{cursorStyle:t}})},[t,e]),a};function em(e){let{hubFile:t,onLoad:a,isFullscreen:n,showFullscreenComments:i,fixedSize:r}=e,c=(0,f.wA)(),[m,d]=l.useState(!1),[h,g]=l.useState(!1),k=l.useRef(null),T=l.useRef(null),{adjustZoom:S,setZoom:N,setCurrentPageId:x,setCanvasSpaceCenter:L,resetZoomToFitCanvasContent:A}=ei(T.current),P=e.showFullscreenComments&&e.isFullscreen,{getViewportInfo:R,pages:M,currentPageId:D}=eo(k,T.current);l.useEffect(()=>{T.current?.port1.postMessage({type:F.cu.SET_COMMENT_MODE,params:{showFullscreenComments:i}})},[i]);let B=l.useCallback(()=>{h||(T.current=new MessageChannel,k.current?.contentWindow?.postMessage({type:"TRANSFER_MESSAGE_PORT"},"*",[T.current.port2]),g(!0))},[h,k]),O=l.useCallback(e=>{T.current?.port1.postMessage({type:F.cu.SET_SCROLL_TO_PAN,params:{scrollToPan:e}})},[]);l.useEffect(()=>{O(n)},[n,O]),l.useEffect(()=>{let e=e=>{"LOAD_FINISHED"===e.data&&(B(),O(!!n),d(!0),a?.())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[D,n,L,x,O,R,a,B]);let U=l.useCallback(t=>{let a;t?.stopPropagation(),(0,b.sx)("Hub File Viewer Toggle Fullscreen",{hubFileId:e.hubFile.id,source:"click"}),a=e.isFullscreen?_.G4.DEFAULT:_.G4.FULLSCREEN,c(s.sW(a))},[c,e.hubFile,e.isFullscreen]),z=l.useRef(null),G=l.useCallback(e=>{z.current=e,P&&I.lS.handleMouseDown(e.x,e.y)},[P]),j=ec(T.current),H=l.useCallback(t=>{P?I.lS.handleMouseUp(t.x,t.y):(!e.disableClickToExpand||!e.disableFullscreen)&&z.current&&E.Mi.distance(t,z.current)<y.wB&&!n&&U(),z.current=null},[P,n,U,e.disableClickToExpand,e.disableFullscreen]),W=l.useCallback(e=>{P&&I.lS.handleMouseMove(e.x,e.y)},[P]),V=l.useCallback(e=>{"Escape"===e&&c(s.sW(_.G4.DEFAULT))},[c]),Z=l.useCallback(e=>{V(e.key)},[V]);es(T.current,{onMouseUp:H,onMouseDown:G,onMouseMove:W,onKeydown:V}),(0,C.U3)("keydown",Z);let $=t.viewer_mode===u.y4.PROTOTYPE;l.useEffect(()=>{$||j("grab")},[$,j]);let Y=$?`/community/file/${t.id}/embed`:`/embed?embed_host=hub_file_detail_view&community_viewer=true&hub_file_id=${t.id}&hide_ui=true`,K=(0,p.m3)(t),Q=(0,v.I)(t),J=(0,o.QQ)(Q);return l.createElement("div",{className:q.Nb},l.createElement("div",{className:q.MI},!$&&m&&l.createElement(ed,{getViewportInfo:R,pages:M,currentPageId:D,setCurrentPageId:x,adjustZoom:S,setZoom:N,setCanvasSpaceCenter:L,resetZoomToFitCanvasContent:A,toggleFullscreen:U,hubFile:t,isFreemiumPreview:K&&!J,isFullscreen:n,commentsIsActive:i,disableComments:e.disableComments,disableFullscreen:e.disableFullscreen,iframeRef:k,messageChannel:T.current}),l.createElement("iframe",{title:"Hub file iframe viewer",height:"100%",width:r?"100%":(0,w.zS)(m),src:Y,allowFullScreen:!0,ref:k})),l.createElement("div",{className:e.isFullscreen&&e.showFullscreenComments?q.Qp:q._A}))}function ed(e){let t=er(e.messageChannel);return l.createElement(l.Fragment,null,e.isFreemiumPreview?l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.GetFreePreviewButton,{hubFile:e.hubFile}))):l.createElement(l.Fragment,null,l.createElement(n.PagesDropdown,{viewerHeight:e.getViewportInfo().height,pages:e.pages,hubFile:e.hubFile,currentPageId:e.currentPageId,setCurrentPageId:e.setCurrentPageId}),"whiteboard"!==e.hubFile.viewer_mode&&e.pages.length>1&&l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.PagesButton,{pages:e.pages,currentPageId:e.currentPageId})))),l.createElement(n.HubFileZoomButtonDropdown,{hubFile:e.hubFile,currentZoomScale:t,adjustZoom:e.adjustZoom,setZoom:e.setZoom,resetZoomToFitCanvasContent:e.resetZoomToFitCanvasContent}),l.createElement(n.BottomRightContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.HubFileZoomButton,{hubFile:e.hubFile,adjustZoom:e.adjustZoom,setZoom:e.setZoom,resetZoomToFitCanvasContent:e.resetZoomToFitCanvasContent,currentZoomScale:t})),!e.disableFullscreen&&l.createElement(n.ButtonContainer,null,l.createElement(n.FullscreenButton,{isFullscreen:e.isFullscreen,toggleFullscreen:e.toggleFullscreen}))))}var eu=a(55253),ep=a(922827),e_=a(511617),eh=a(737947),eg=a(966712),ef=a(179940),eb=a(30090),eE=a(153808),ev=a(27087),ew=a(201242),ey=a(56029),eI=a(992271),eC=a(428654),ek=a(356390),eT=a(379202),eS=a(745540),eF=a(559403),eN=a(837746),ex=a(23966),eL=a(172413);let eA=e=>e?{backgroundColor:eC.F.format(e)}:{};function eP(e){let t=l.useRef(new ey.Se).current,[a,n]=l.useState(null),i=eE.ur("PROTOTYPE",a,{workerURL:Fig.tsViewerWorkerURL,scrollToPan:e.isFullscreen,featureFlags:(0,eg.kc)(),trackingSessionId:(0,eg.tl)().tracking_session_id||null,bowser:r.Ay,forceMobileOptimizations:null!=ef.qg(eh.Ay.location.search)["mobile-optimizations"],deviceInfoByIdentifier:eI.hY,trackAnalyticsEvent:b.sx,definedAnalyticsHandler:b.az,appTimerStart:e=>{"rendererDraw"===e&&t.handleDocumentRenderStart()},appTimerStop:e=>{"rendererDraw"===e&&t.handleDocumentRenderStop()},nextFrame:e=>{ep.fZb?.nextFrame(e)},startProfile:(e,t)=>ep.fZb?.startProfile(e,t)??!1,stopProfile(e,t){ep.fZb?.stopProfile(e,t)},kiwiSchema:eu.w},!0);l.useEffect(()=>{i&&i.setShowHotspots(!0)},[i]);let{currFrameIndex:o,numFrames:s,shouldShowFrameCounter:c,navigateBackwardEnabled:m,navigateForwardEnabled:d}=(0,Q.Xl)(i),{showNextFrame:u,showPreviousFrame:p,restartPrototype:_}=(0,Q.Qd)(i,null);return l.createElement(eR,{viewer:i,viewerLoadTimeTracker:t,viewerElement:a,setViewerElement:n,currFrameIndex:o,numFrames:s,shouldShowFrameCounter:c,navigateBackwardEnabled:m,navigateForwardEnabled:d,showNextFrame:u,showPreviousFrame:p,restartPrototype:_,...e})}class eR extends l.PureComponent{constructor(e){super(e),this.hubViewerRef=l.createRef(),this.fullscreenWidth=()=>window.innerWidth-2*(0,i.hG)(eN.QtA),this.zoomForFullscreenState=e=>{let t=this.props.minimizedWidth?this.fullscreenWidth()/this.props.minimizedWidth:Math.min(window.innerWidth/screen.width,window.innerHeight/screen.height);return e?t:1/t},this.handlePageChange=e=>{this.setState({pages:e})},this.getCanvas=()=>{if(this.props.viewerElement){let e=this.props.viewerElement.getElementsByTagName("canvas");return 1===e.length?e[0]:null}return null},this._canvasRectToViewportInfo=(e,t)=>({x:0-(t?.x||0),y:0-(t?.y||0),width:e.width,height:e.height,offsetX:this.lastViewport&&-this.lastViewport.offset.x,offsetY:this.lastViewport&&-this.lastViewport.offset.y,zoomScale:this.lastViewport&&this.lastViewport.zoomScale,isPanning:!1,isZooming:!1}),this.getViewport=()=>{let e=this.getCanvas();if(!e)return this._canvasRectToViewportInfo({x:0,y:0,width:0,height:0});let t=e.getBoundingClientRect();return this._canvasRectToViewportInfo(t,{x:-6,y:-6})},this.updateViewportInfoIfNecessary=()=>{if(!this.lastViewport)return;let e=this.getViewport();ek.Y5.viewport.trigger("onSetViewport",e)},this.handleViewportChange=e=>{this.setState({zoomScale:e.zoomScale}),this.lastViewport=e,this.updateViewportInfoIfNecessary()},this.handleDocumentIsLoaded=()=>{this.props.viewerLoadTimeTracker.handleDocumentIsLoaded()},this.handleSceneDidCompleteInitialLoad=()=>{if(!this.props.viewer)return;eT.r.logValue("viewerSceneDidCompleteInitialLoad",Math.round(performance.now())),this.props.viewerLoadTimeTracker.handleViewerLoaded();let e=(0,ef.qg)(eh.Ay.location.search)["node-id"];this.props.viewer.navigateToFrameAndCloseOverlays(e);let t=this.props.viewer.getPrototypeBackgroundColor();this.setBackgroundColor(t||eF.o),this.props.viewer.on("backgroundColorChange",this.setBackgroundColor),this.props.viewer.on("prototypeBackgroundColorChange",this.setBackgroundColor);let a=this.props.viewer.getPages();this.setState({pages:a}),this.viewerLoadedTimeout=setTimeout(()=>{this.props.onLoad&&this.props.onLoad(),this.setState({isLoaded:!0})},200),this.contextViewEventTimeout=setTimeout(()=>{(0,b.sx)("Context Viewed",{name:"hub-file-canvas-loaded"})},300)},this.bindEventsToViewer=e=>{ef.qg(eh.Ay.location.search),this.setState({zoomBounds:e.getZoomBounds()}),e.on("pagesChange",this.handlePageChange),e.on("viewportChanged",this.handleViewportChange),e.on("sceneDidCompleteInitialLoad",this.handleSceneDidCompleteInitialLoad),e.on("documentIsLoaded",this.handleDocumentIsLoaded),e.on("canvasResize",this.updateViewportInfoIfNecessary),e.on("urlClicked",e_.jJ),e.on("loadVideoJsLib",async()=>{await (0,eb.Fe)().then(t=>{e&&e.injectVideoJsLib(t)})})},this.unbindEventsToViewer=()=>{let e=this.props.viewer;e&&(e.off("pagesChange",this.handlePageChange),e.off("viewportChanged",this.handleViewportChange),e.off("sceneDidCompleteInitialLoad",this.handleSceneDidCompleteInitialLoad),e.off("documentIsLoaded",this.handleDocumentIsLoaded),e.off("backgroundColorChange",this.setBackgroundColor),e.off("prototypeBackgroundColorChange",this.setBackgroundColor),e.off("canvasResize",this.updateViewportInfoIfNecessary),e.off("urlClicked",e_.jJ),e.reset())},this.setBackgroundColor=e=>{e&&this.setState({backgroundColor:e})},this.handleKeyDown=e=>{(this.state.isFocused||this.props.isFullscreen)&&((0,k.RL)(e)?this.showPreviousFrame():(0,k.Hs)(e)?this.showNextFrame():(0,k.fz)(e)&&this.restartPrototype())},this.showNextFrame=()=>{(0,b.sx)("Hub File Viewer Show Next Frame",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.showNextFrame()},this.showPreviousFrame=()=>{(0,b.sx)("Hub File Viewer Show Previous Frame",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.showPreviousFrame()},this.restartPrototype=()=>{(0,b.sx)("Hub File Viewer Restart Prototype",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.restartPrototype()},this.handleClick=e=>{e.stopPropagation(),this.setState({isFocused:!0})},this.handleExternalClick=e=>{this.hubViewerRef&&this.hubViewerRef.current&&!this.hubViewerRef.current.contains(e.target)&&this.setState({isFocused:!1})},this.getCurrentZoomScale=()=>this.props.viewer?.viewport().zoomScale||1;let t=(0,eg.tl)();this.state={backgroundColor:t.background_color||null,fileName:t.name,zoomBounds:null,zoomScale:null,scalingMode:null,isFocused:!1,isLoaded:!1,pages:[]},this.prototypeZoomButtonContainerRef=l.createRef()}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleExternalClick)}componentDidUpdate(e){if(this.props.viewer&&!e.viewer){let e=this.props.viewer;try{ev.Ay.crossOriginGetAny(this.props.hubFile.redirect_canvas_url,null,{responseType:"arraybuffer"}).then(({data:t})=>{this.bindEventsToViewer(e),eT.Q.setLoadTimeTracker(this.props.viewerLoadTimeTracker),e.loadFile({bytes:t,nodeId:"",startingPointNodeId:"",renderDots:"whiteboard"===this.props.hubFile.viewer_mode,imagePrefixURL:`/community/file/${this.props.hubFile.id}/image`,videoPrefixURL:`/api/community/files/${this.props.hubFile.id}/videos`,editorType:"DESIGN"},eS.M),this.props.viewerLoadTimeTracker.handleAfterConnectTo({entry:"InAppCommunity",connectionType:"file",fullscreen:"Fullview-IC",logViewerWaiting:!1});let a=this.props.hubFile.scaling_mode;if(!a){let t=e.getPrototypeDeviceType(),n=(0,k._Q)(t);a=(0,k.qb)(n)}let n={viewportScalingMode:a,contentScalingMode:"fixed"};e.setScalingMode(n),this.setState({scalingMode:n})})}catch(e){throw console.error("Error loading hub file:",e),e}}e.isFullscreen!==this.props.isFullscreen&&(this.props.viewer?.adjustZoom(this.zoomForFullscreenState(this.props.isFullscreen),.3),this.props.viewer?.setScrollToPan(this.props.isFullscreen))}componentWillUnmount(){clearInterval(this.contextViewEventTimeout),clearInterval(this.viewerLoadedTimeout),this.unbindEventsToViewer(),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleExternalClick)}render(){if(null===this.props.viewer)return null;let{backgroundColor:e,scalingMode:t}=this.state,a=eA(e),i=t?.viewportScalingMode==="scale-down";return l.createElement("div",{className:q.q9,onClick:this.handleClick,ref:this.hubViewerRef},l.createElement("div",{style:i?a:{},className:q.MI},i&&l.createElement("div",{className:q.cf}),l.createElement("div",{className:q.lJ,ref:this.props.setViewerElement}),this.props.viewer?.hasActiveScene()&&l.createElement(l.Fragment,null,l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(ew.xy,{onClick:this.restartPrototype,className:q.qR}),l.createElement(n.Divider,null),l.createElement(ew.hJ,{navigateForwardEnabled:this.props.navigateForwardEnabled,navigateBackwardEnabled:this.props.navigateBackwardEnabled,shouldShowFrameCounter:this.props.shouldShowFrameCounter,frameCount:this.props.viewer.getNodesToShowInPrototype().length,currentFrameIndex:this.props.currFrameIndex,showPreviousFrame:this.showPreviousFrame,showNextFrame:this.showNextFrame,backIcon:ex.A,nextIcon:eL.A,containerClassName:q.YO,frameCounterTextClassName:q.d6})))),this.props.viewer?.hasActiveScene()&&l.createElement(l.Fragment,null,this.props.viewer&&l.createElement(n.HubFileZoomButtonDropdown,{hubFile:this.props.hubFile,currentZoomScale:this.getCurrentZoomScale(),adjustZoom:this.props.viewer.adjustZoom,setZoom:this.props.viewer.setZoom,resetZoomToFitCanvasContent:P.lQ}),this.props.viewer?.hasActiveScene()&&this.prototypeZoomButtonContainerRef.current&&l.createElement(n.PrototypeZoomDropdown,{viewer:this.props.viewer,targetRect:this.prototypeZoomButtonContainerRef.current.getBoundingClientRect(),initialScalingMode:this.state.scalingMode}),l.createElement(n.BottomRightContainer,null,l.createElement(n.ButtonContainer,{ref:this.prototypeZoomButtonContainerRef},this.props.viewer&&l.createElement(n.PrototypeZoomButton,{viewer:this.props.viewer,getCurrentZoomScale:this.getCurrentZoomScale})),!this.props.disableFullscreen&&l.createElement("div",{style:{visibility:"hidden"}},l.createElement(n.ButtonContainer,null,l.createElement(n.FullscreenButton,{toggleFullscreen:P.lQ,isFullscreen:!0}))))),i&&l.createElement("div",{className:q.cf})))}}eR.displayName="HubFilePrototypeViewer";var eM=a(699670);let eD=(0,i.hG)(eN.QtA);var eB=(e=>(e[e.MINIMIZED=0]="MINIMIZED",e[e.MINIMIZED_TO_FULLSCREEN=1]="MINIMIZED_TO_FULLSCREEN",e[e.FULLSCREEN=2]="FULLSCREEN",e[e.FULLSCREEN_TO_MINIMIZED=3]="FULLSCREEN_TO_MINIMIZED",e))(eB||{});let eO=e=>(e+1)%4;class eU extends l.Component{constructor(){super(...arguments),this.containerRef=l.createRef(),this.state={embedLoaded:!1,fullscreenTransitionState:(0,d.t0)(this.props.fullscreenState)?2:0,showFullscreenComments:this.props.fullscreenState===_.G4.FULLSCREEN_WITH_COMMENTS},this.handleFullscreenTransition=(e,t)=>{if(e!==t){if((0,d.t0)(e)!==(0,d.t0)(t)){let e=eO(this.state.fullscreenTransitionState),a=eO(e);this.setState({fullscreenTransitionState:e}),setTimeout(()=>{this.setState({fullscreenTransitionState:a,showFullscreenComments:!1}),t===_.G4.FULLSCREEN_WITH_COMMENTS&&setTimeout(()=>{this.setState({showFullscreenComments:!0})},400)},10)}else t===_.G4.FULLSCREEN_WITH_COMMENTS?this.setState({showFullscreenComments:!0}):e===_.G4.FULLSCREEN_WITH_COMMENTS&&this.setState({showFullscreenComments:!1})}},this.setFullscreenState=e=>{this.props.dispatch(s.sW(e))},this.onViewerLoad=()=>{this.state.embedLoaded||(this.setState({embedLoaded:!0}),parent.postMessage("LOAD_FINISHED","*"))}}componentDidUpdate(e){(e.hubFile.viewer_mode!==this.props.hubFile.viewer_mode||e.hubFile.scaling_mode!==this.props.hubFile.scaling_mode)&&this.setState({embedLoaded:!1}),e.fullscreenState!==this.props.fullscreenState&&this.handleFullscreenTransition(e.fullscreenState,this.props.fullscreenState)}isInFullscreen(){return 2===this.state.fullscreenTransitionState}isPaidFigjamWithoutPurchase(){let e=(0,p.m3)(this.props.hubFile),t=this.props.hubFile.community_resource_payment,a=(0,o.QQ)(t);return this.props.hubFile.viewer_mode===u.y4.WHITEBOARD&&e&&!a}getViewer(){return this.props.disableViewerForTest?null:this.props.hubFile.viewer_mode===u.y4.PROTOTYPE?l.createElement(eP,{hubFile:this.props.hubFile,onLoad:this.onViewerLoad,profileIdToAdminResourceAs:this.props.profileIdToAdminResourceAs,expandOnHover:!this.props.disableClickToExpand&&this.state.fullscreenTransitionState<2,isFullscreen:this.isInFullscreen(),minimizedWidth:this.containerRef.current?.offsetWidth,disableClickToExpand:this.props.disableClickToExpand,disableFullscreen:this.props.disableFullscreen}):l.createElement(em,{hubFile:this.props.hubFile,onLoad:this.onViewerLoad,isFullscreen:this.isInFullscreen(),showFullscreenComments:this.state.showFullscreenComments,disableComments:this.props.disableComments,disableClickToExpand:this.props.disableClickToExpand,disableFullscreen:this.props.disableFullscreen,profileIdToAdminResourceAs:this.props.profileIdToAdminResourceAs,fixedSize:this.props.fixedSize})}render(){let e=!!this.props.hubFile.thumbnail_is_set,t=this.state.fullscreenTransitionState,a=this.props.hubFile.viewer_mode===u.y4.WHITEBOARD,n=this.containerRef.current?.getBoundingClientRect(),i=1===t?{position:"fixed",top:n.top,left:n.left,right:window.innerWidth-n.right,bottom:window.innerHeight-n.bottom}:3===t?{position:"absolute",top:-n.top+eD,left:-n.left+eD,right:-(window.innerWidth-eD-n.right),bottom:-(window.innerHeight-eD-n.bottom),zIndex:eM.Zo}:{},o=this.state.embedLoaded?2===t?r.Ay.safari?"hub_file_detail_view--iframeContainerFullscreenSafari--x9JRk hub_file_detail_view--iframeContainerFullscreen--Itum1 hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainerFullscreen--Itum1 hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainerLoading--Uch-h hub_file_detail_view--iframeContainer---uQYN",s={height:"100%",visibility:this.state.embedLoaded?"visible":"hidden",display:"flex",flexDirection:"column"};return l.createElement("div",{className:this.props.allowFullHeight?"hub_file_detail_view--coverImageContainerFullHeight--99Bv7 hub_file_detail_view--coverImageContainer--3DphS detail_view--coverImageContainer--Yt17P":"hub_file_detail_view--coverImageContainer--3DphS detail_view--coverImageContainer--Yt17P",ref:this.containerRef},l.createElement("div",{className:this.isInFullscreen()?"hub_file_detail_view--modalEmbedBackground--LTsNY":"hub_file_detail_view--modalEmbedBackgroundHidden--Iqlhu hub_file_detail_view--modalEmbedBackground--LTsNY",onClick:()=>this.setFullscreenState(_.G4.DEFAULT)}),l.createElement("div",{className:0===t?"hub_file_detail_view--coverImageContainerMinimized--W9o-Q hub_file_detail_view--coverImageContainerStatic--KXE3R hub_file_detail_view--_embedFullscreenTransition--sMsEd":2===t?"hub_file_detail_view--coverImageContainerFullscreen--eSIBa hub_file_detail_view--coverImageContainerStatic--KXE3R hub_file_detail_view--_embedFullscreenTransition--sMsEd":"",style:i},l.createElement("div",{className:this.props.containerClassName||o},l.createElement(c.fu,{name:"Canvas Embed"},l.createElement("div",{id:"HubFileViewerContainer",style:s},this.getViewer())),l.createElement("div",{className:this.state.embedLoaded?"hub_file_detail_view--coverImageContainerHidden--hCY-H hub_file_detail_view--coverImageContainerShowing--ZnsLn":"hub_file_detail_view--coverImageContainerShowing--ZnsLn",style:{backgroundColor:(0,m.Cn)(this.props.hubFile.client_meta)}},l.createElement(h.Ho,{image:this.props.hubFile.thumbnail_url,isSet:e,isWhiteboard:a,backgroundColor:(0,m.Cn)(this.props.hubFile.client_meta),hubFileId:this.props.hubFile.id,alt:this.props.hubFile.versions[this.props.hubFile.current_hub_file_version_id].name,resizedThumbnailUrls:this.props.hubFile.resized_thumbnail_urls})),l.createElement(g.Dy,{key:`${this.props.hubFile.viewer_mode}_${this.props.hubFile.scaling_mode}_progressBar`,className:"hub_file_detail_view--iframeProgressBar--NZmiy",style:this.state.embedLoaded?{visibility:"hidden"}:{}}))))}}},368361:(e,t,a)=>{a.d(t,{R:()=>q});var n=a(411855),l=a(188507),i=a(776250),r=a(540193),o=a(201888),s=a(517333),c=a(799569),m=a(946689),d=a(493323),u=a(355819),p=a(939863),_=a(410424),h=a(74021),g=a(941381),f=a(225266),b=a(446686),E=a(57879),v=a(944682),w=a(662275),y=a(445092),I=a(115826),C=a(756085),k=a(946413),T=a(27703),S=a(860178),F=a(99506),N=a(540019),x=a(596607),L=a(555328),A=a(813408),P=a(754168),R=a(237870),M=a(474742),D=a(548593),B=a(761939),O=a(933464),U=a(133648),z=a(805443);let G=(0,D.rw)();function j(e){let[t,a]=n.useState();return n.useEffect(()=>{(0,o.oU)(location.href).then(e=>a(e))},[]),n.createElement("div",{className:z.bx},n.createElement("div",{className:z.Uz},e.tab===B.gr.PLUGINS?(0,p.t)("community.universal_posting_modal.desktop_callout.plugins"):(0,p.t)("community.universal_posting_modal.desktop_callout.widgets")),n.createElement(m.N_,{onClick:()=>{(0,i.sx)(t?"community_publish_open_desktop_clicked":"community_publish_get_desktop_clicked",{resourceType:e.tab===B.gr.PLUGINS?L.bD.PLUGIN:L.bD.WIDGET}),t&&(0,o.Sr)(location.href,o.B3.UNIVERSAL_POSTING_MODAL)},href:t?void 0:"https://www.figma.com/downloads/",className:z.nf,target:"_blank",trusted:!0},void 0===t?"":t?` ${(0,p.t)("community.universal_posting_modal.desktop_open")}`:` ${(0,p.t)("community.universal_posting_modal.desktop_get")}`))}function H(e){return e.selectedTab===B.gr.FILES?n.createElement(B.fV,{activeFileKey:e.activeFileKey,setActiveFile:e.setActiveFile,deselectActiveFile:e.deselectActiveFile,filterFn:e.filterFn}):e.selectedTab===B.gr.PLUGINS?n.createElement(V,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource}):n.createElement(W,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource})}function W(e){let{invitedWidgets:t,pendingReviewWidgets:a,approvedWidgets:l,developmentWidgets:i}=(0,C.E$)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return s.eD?t.length+a.length+l.length+i.length===0?n.createElement(B.n6,{tab:B.gr.WIDGETS}):n.createElement("div",{className:z.BA,onClick:e.deselectActiveResource},t.map(e=>n.createElement(O.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?z.Ij:z.$z})),i.map(t=>n.createElement(O.ke.Tile,{plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?z.Ij:z.$z,showEditorTypeIcon:!0})),[...a,...l].map(t=>n.createElement(O.tY.Tile,{key:t.id,plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?z.Ij:z.$z}))):n.createElement(j,{tab:B.gr.WIDGETS})}function V(e){let{invitedPlugins:t,pendingReviewPlugins:a,approvedPlugins:l,developmentPlugins:i}=(0,C.LR)(),r=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return s.eD?i.length+a.length+l.length+t.length===0?n.createElement(B.n6,{tab:B.gr.PLUGINS}):n.createElement("div",{className:z.BA,onClick:e.deselectActiveResource},t.map(e=>n.createElement(O.sp.Tile,{key:e.id,plugin:e,containerClassName:r(e)?z.Ij:z.$z})),i.map(t=>n.createElement(O.ke.Tile,{plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:r(t)?z.Ij:z.$z,showEditorTypeIcon:!0})),[...a,...l].map(t=>n.createElement(O.tY.Tile,{key:t.id,plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},containerClassName:r(t)?z.Ij:z.$z}))):n.createElement(j,{tab:B.gr.PLUGINS})}function Z(e){return s.eD?n.createElement("div",{className:z.q5},(0,p.t)("community.universal_posting_modal.plugin_info.available",{numPlugins:e.numPlugins})):n.createElement("div",{className:z.q5},(0,p.t)("community.universal_posting_modal.plugin_info.unavailable"))}function $(e){return s.eD?n.createElement("div",{className:z.q5},(0,p.t)("community.universal_posting_modal.widget_info.available",{numWidgets:e.numWidgets})):n.createElement("div",{className:z.q5},(0,p.t)("community.universal_posting_modal.widget_info.unavailable"))}function Y(e){let t;let a=(0,l.d4)(e=>e.user.email),i=(0,l.d4)(e=>e.orgById);if((0,l.d4)(e=>(0,x.Yj)(e))){let l=e.currentOrgId&&i[e.currentOrgId]?i[e.currentOrgId].name:null;t=n.createElement("div",{className:z.Js},l&&n.createElement(n.Fragment,null,l,n.createElement("span",null,"\xa0\xb7\xa0")),a)}else t=n.createElement("div",{className:z.Js},a);return n.createElement("div",{className:z.Yk},e.selectedTab===B.gr.FILES&&(0===e.numFiles?n.createElement("div",{className:z.q5},(0,p.t)("community.universal_posting_modal.file_info.available",{numFiles:e.numFiles})):n.createElement(B.IW,{query:e.searchQuery,setQuery:e.setSearchQuery,setSearchResults:e.setSearchResults})),e.selectedTab===B.gr.PLUGINS&&n.createElement(Z,{numPlugins:e.numPlugins}),e.selectedTab===B.gr.WIDGETS&&n.createElement($,{numWidgets:e.numWidgets}),t)}function K(e){let t=(0,l.wA)(),a=(0,S.Pc)(),r=[],o={[B.gr.FILES]:(0,p.t)("community.view_bar.files"),[B.gr.PLUGINS]:(0,p.t)("community.view_bar.plugins"),[B.gr.WIDGETS]:(0,p.t)("community.view_bar.widgets")};return Object.keys(o).forEach(l=>{let s=o[l];r.push(n.createElement(G,{tab:l,mobileNavTabTitle:s,selectedTab:e.selectedTab,key:l,onClick:()=>{e.activeSearchQuery&&(t(y._z({})),t(y.ky())),(0,i.sx)("publish_type_changed",{userId:a.id,resourceType:s}),e.setSelectedTab(l)}},s))}),n.createElement("div",{className:z.Lm},n.createElement("div",{className:z.KE},r),n.createElement(c.s_,{className:z.g8,dispatch:()=>{(0,i.sx)("community_publish_modal",{step:I.M.CLOSED}),t(w.Ce())}}))}var Q=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(Q||{});let q=(0,R.Ju)(function(e){let t=(0,S.Pc)(),a=(0,l.wA)(),o=(0,l.d4)(e=>!!e.user),s=(0,l.d4)(e=>e.currentUserOrgId),c=(0,r.ql)(s),x="loaded"===c.status,[R,D]=n.useState(2),[O,G]=n.useState({}),j=(0,C.Im)(),W=(0,T.ud)(),V=(0,C.CI)(),Z=(0,C.Dy)(),$=Object.keys(W).length;(0,N.IT)((0,g.se)()),(0,N.IT)((0,g.fd)()),n.useEffect(()=>{a(y._z({})),o&&(a(h._J()),a(f.aq()));let e=document.body.style.overflowY;return document.body.style.overflowY="hidden",()=>{document.body.style.overflowY=e}},[]),n.useEffect(()=>{if(!x||2!==R)return;let e=c.data.map(e=>e.key);0!==e.length&&(D(1),P.S.getHubFileDuplicates({fileKeys:e}).then(e=>{G(e.data.meta),D(0)}))},[R,x,c.data]);let Q=n.useCallback(e=>{let t=O[e.key],a=e.editor_type===F._Y.SLIDES;return!t&&!a},[O]),q=()=>{eo&&a(y.ky()),(0,i.sx)("community_publish_modal",{user:t.id,step:I.M.CLOSED}),a(w.Ce())},J=async e=>{await a(_.rH({fileKey:e}))},X=async e=>{e&&(et(e),W[e.key]||a(v.yJ({file:e})),await J(e.key))},[ee,et]=n.useState(null),ea=()=>et(null),[en,el]=n.useState(null),[ei,er]=n.useState(B.gr.FILES),[eo,es]=n.useState(""),[ec,em]=n.useState([]),ed=n.useCallback(e=>{em(e&&e.filter(e=>Q(e.model)))},[Q]);if(!o)return n.createElement(n.Fragment,null);let eu=x&&0===R;return n.createElement(M.Nb,{size:"any",className:z.aq,hide:q},n.createElement(K,{activeSearchQuery:eo,selectedTab:ei,setSelectedTab:er}),n.createElement(Y,{selectedTab:ei,currentOrgId:s,searchQuery:eo,setSearchQuery:es,setSearchResults:ed,numPlugins:V,numWidgets:Z,numFiles:$}),n.createElement(u.P,{className:z.jG,hideScrollbar:!0},!eu&&n.createElement("div",{className:z.g4},n.createElement(d.kt,{size:"small"})),eo&&n.createElement(B.fp,{activeSearchQuery:eo,activeFileKey:ee?.key||null,setActiveFile:X,deselectActiveFile:ea,searchResults:ec}),eu&&!eo&&n.createElement(H,{selectedTab:ei,activeFileKey:ee?.key||null,setActiveFile:X,deselectActiveFile:ea,activeResource:en,setActiveResource:el,deselectActiveResource:()=>el(null),filterFn:Q})),n.createElement("div",{className:z.qr},n.createElement("div",{className:z.PJ},(0,p.t)("community.universal_posting_modal.footer.choose_resource"),n.createElement(m.CY,{href:"https://help.figma.com/hc/articles/360040035974-Publish-Community-files",target:"_blank",trusted:!0},(0,p.t)("community.universal_posting_modal.footer.learn_more"))),n.createElement("div",{className:z.GC},n.createElement(U.M4,{onClick:q},(0,p.t)("general.cancel")),n.createElement(U.UC,{disabled:ei===B.gr.FILES?!ee:ei===B.gr.PLUGINS||ei===B.gr.WIDGETS?!en:void 0,onClick:()=>{if(ei===B.gr.FILES)ee&&((0,i.sx)("community_publish_modal",{user:t.id,step:I.M.DETAILS,resourceType:L.bD.HUB_FILE,fileKey:ee.key,fileName:ee.name}),a((0,b.t)({fileKey:ee.key,isFullscreenOpen:!1,entryPoint:A.k2.UNIVERSAL_POSTING,canvasThumbnailPromise:(0,k.$)(ee.key,t),source:e.source})),et(null));else if((ei===B.gr.PLUGINS||ei===B.gr.WIDGETS)&&en){let e="localFileId"in en?en:j[en.id],n=e.localFileId;(0,i.sx)("community_publish_modal",{user:t.id,step:I.M.DETAILS,resourceType:ei===B.gr.PLUGINS?L.bD.PLUGIN:L.bD.WIDGET,pluginId:e.plugin_id,pluginName:e.name,localFileId:n}),a((0,E.r)({localFileId:n,entryPoint:A.k2.UNIVERSAL_POSTING})),el(null)}}},(0,p.t)("general.next")))))},"Universal Posting Modal")},734366:(e,t,a)=>{a.d(t,{ZH:()=>I,$z:()=>y,IX:()=>w});var n=a(411855),l=a(188507),i=a(629019),r=a.n(i),o=a(966712),s=a(758297),c=a(154254),m=a(468557),d=a(939863),u=a(67294),p=a(291099),_=a(27703),h=a(335682),g=a(694687);let f="custom_template_publish_nudge_content--thumbnailInnerContainerMd--Emvtj",b="custom_template_publish_nudge_content--currFileThumbnail--Yo6Lb",E=(0,o.ck)("b13789723ab5e9138ab263193f7d82aff4c47674"),v=(0,o.ck)("f290b00b2b225be3eb5056cb4473d87953764837");var w=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(w||{});function y({size:e=1,useCurrentFileAsThumbnail:t=!1}){let a=(0,g.dq)(),i=(0,l.d4)(e=>e.user),o=(0,h.tS)(),c=(0,_.ud)(),m={2:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicSm--WcSGr custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarSm--koOYf custom_template_publish_nudge_content--orgAvatar--qPeJa custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",userAvatar:"custom_template_publish_nudge_content--userAvatarSm--B4Zex",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailSm--iH1ZK custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerSm--gUImw custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:f},1:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicMd--7iA69 custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarMd--oCgCy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarMd--G2FtM",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailMd--dl3H9 custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerMd--8TV1k custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarMd--D18sG custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:f},0:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicLg--0mkdU custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarLg--PpLOy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarLg--dDo-X",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailLg--9cUca custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerLg--Mrew2 custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarLg--Xep7T custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:"custom_template_publish_nudge_content--thumbnailInnerContainer--2yUkJ"}}[e],d=n.createElement("img",{src:E,alt:"",className:b});if(null!=o&&t){let e=c[o]?.thumbnail_url;e&&(d=n.createElement("img",{src:e,alt:"",className:b}))}return n.createElement("div",{className:m.modalGraphic},n.createElement("img",{src:v,alt:"",className:m.exampleFileThumbnail}),i&&n.createElement(s.n,{className:r()(m.avatar,m.orgAvatar),userId:i.id,orgId:a,size:2===e?16:1===e?24:32}),i&&n.createElement("div",{className:r()(m.avatar,m.userAvatar)},n.createElement(u.H8,{user:i,size:2===e?u.Pf.SMALL16:1===e?u.Pf.MEDIUM:u.Pf.LARGE})),n.createElement("div",{className:m.thumbnailContainer},n.createElement("div",{className:m.thumbnailInnerContainer},d)))}function I(){return n.createElement("div",null,n.createElement(y,{size:0,useCurrentFileAsThumbnail:!0}),n.createElement("div",{className:c.cx.p16.font11.$},(0,d.tx)("whiteboard.inserts.custom_templates_description")),n.createElement("div",{className:c.cx.flex.justifyEnd.mx16.mb16.$},n.createElement(m.pW,{newTab:!0,href:p.A},(0,d.tx)("whiteboard.inserts.learn_more"))))}},706638:(e,t,a)=>{a.d(t,{P:()=>M,v:()=>L});var n=a(411855),l=a(188507),i=a(922827),r=a(539321);if(443==a.j)var o=a(395096);var s=a(776250),c=a(358145),m=a(395900),d=a(268537),u=a(493323),p=a(135876),_=a(355819),h=a(32863),g=a(163023),f=a(939863),b=a(738269),E=a(15859),v=a(318812),w=a(29680),y=a(335682),I=a(463592),C=a(103271),k=a(298543),T=a(406158),S=a(568716);if(443==a.j)var F=a(949207);if(443==a.j)var N=a(156238);if(443==a.j)var x=a(432023);var L=(e=>(e.LOADED="post-to-feed-view-loaded",e.SELECT_NODE="post-to-feed-select-node",e))(L||{});function A(e){return n.createElement("div",{className:null!==e.isSelectedIdx?S.El:S.Vs,onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},n.createElement("div",{className:S.h3,style:{backgroundColor:e.backgroundColor}},n.createElement(p.x,{isLoading:!e.thumbnailUrl},()=>n.createElement("img",{className:S.xn,src:e.thumbnailUrl,alt:"",draggable:!1}))),n.createElement("div",{className:S.JO},n.createElement("div",{className:S.qp},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&n.createElement("div",{className:S.Jx},e.isSelectedIdx+1))}function P(e){let{toggleSelectNode:t}=e,a=(e.pageNode&&(0,r.colorToHex)(e.pageNode.backgroundColor))??"",[l,i]=n.useState(!1),o=n.useCallback(n=>{t(n,{pageId:e.pageNode.guid,pageBackgroundColor:a})},[t,e.pageNode.guid,a]);return n.createElement("div",{className:S.RW},e.showCollapsibleHeader&&n.createElement("div",{className:S.Vr,onClick:()=>i(e=>!e),role:"button",tabIndex:0},l?n.createElement(g.B,{svg:x.A,className:S.Rq}):n.createElement(g.B,{svg:F.A,className:S.Rq}),e.pageNode.name,"\xa0",n.createElement("span",{className:S.Du},"\xb7 ",e.nodes.length)),!l&&n.createElement("div",{className:S.Mc},e.nodes.map(t=>{let l=e.selectedNodeGuids?.indexOf(t.guid)??null;return n.createElement(A,{key:`node-${t.guid}`,node:t,thumbnailUrl:e.thumbnailByGuid[t.guid]?.url??"",backgroundColor:a,isSelectedIdx:-1===l?null:l,onClick:()=>o(t.guid),totalNumSelected:e.selectedNodeGuids?.length??null,observe:e.observe})})))}let R="feed-post-page-selector-menu";function M(){let e=n.useCallback((e,t)=>{let a=window.parent;window.self.origin===a.origin&&a&&a.postMessage({type:e,data:t})},[]),t=n.useRef(new m.jk("feed_post_to_file_load",{}));n.useEffect(()=>{t.current.start()},[]);let a=(0,w.aV)(),r=(0,w.eY)(),p=(0,y.tS)();n.useEffect(()=>{if(!a){t.current.stop();let a=t.current.getElapsedTime();(0,s.sx)("team_feed.post_from_file.file_load",{elapsedMs:a,fileKey:p}),e("post-to-feed-view-loaded",!0)}},[a,e,p]);let F=(0,l.d4)(e=>e.mirror.appModel.pagesList),x=n.useMemo(()=>F.reduce((e,t)=>({...e,[t.nodeId]:r.get(t.nodeId)}),{}),[F,r]),L=(0,l.wA)(),A=n.useMemo(()=>Object.values(x).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let a=r.get(t);return a&&("FRAME"===a.type||"SECTION"===a.type)?{...a,pageId:e.guid,name:a?.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[x,r]),M=n.useMemo(()=>{let e={};for(let t of A)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[A]),D=n.useMemo(()=>new I.Ef(A,{keys:["name"]}),[A]),[B,O]=n.useState(""),[U,z]=n.useState(null),[G]=(0,o.A)(B,200),j=n.useCallback(e=>{z(D.search(e))},[D]),H=n.useMemo(()=>{if(null===U)return null;let e={};for(let t of U)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[U]);n.useEffect(()=>{""!==G&&j(G)},[G,j]);let W=(0,v.Um)(),V=n.useRef(null),[Z,$]=n.useState(null);n.useEffect(()=>{if(Z||!r||!M||0===Object.keys(M).length)return;let e=r.get(Object.keys(M)[0]);e&&$(e)},[Z,M,r]);let[Y,K]=n.useState({}),[Q,q]=n.useState([]),J=(0,c.ZC)(Q),X=n.useRef(null),[ee,et]=n.useState([]),ea=n.useCallback(e=>{let t=[];e.forEach(e=>{if(e.isIntersecting&&e.target instanceof HTMLElement){let a=e.target.dataset?.observerGuid;a&&t.push(a)}}),et(t)},[]),en=n.useMemo(()=>new IntersectionObserver(ea,{threshold:[.25]}),[ea]),el=n.useCallback(e=>{en&&en.observe(e)},[en]),[ei,er]=n.useState({});n.useEffect(()=>{if(0===ee.length)return;let e=ee.filter(e=>!ei[e]);0!==e.length&&(0,E.Jr)().loadAllImagesUnder(e,i.MoD.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{er(t=>{if(t[e])return t;let a=(0,T.BO)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([a])),data:a}}})},0)})})},[ee,ei]),n.useEffect(()=>{Q!==J&&e("post-to-feed-select-node",Q.map(e=>({guid:e,thumbnail:ei[e].data,backgroundColor:Y[e]})))},[J,Q,e,ei,Y]);let eo=n.useCallback((e,t)=>{ei[e]&&(K(a=>t.pageBackgroundColor?{...a,[e]:t.pageBackgroundColor}:a),q(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=C.e3?t:[...t,e]))},[ei]);return M&&0===Object.keys(M).length?n.createElement("div",{className:S.se},(0,f.t)("fig_feed.no_top_level_nodes")):Z?n.createElement("div",{className:S.kL},n.createElement("div",{className:S.Y},n.createElement(h.IW,{query:B,className:S.ON,onChange:O,clearSearch:()=>{O(""),z(null)},focusOnMount:!1,iconClassName:S.qc,placeholder:(0,f.t)("fig_feed.search_frames")}),""===B&&n.createElement(n.Fragment,null,n.createElement("div",{role:"button",ref:V,onClick:()=>{W?.type===R?L(b.oB()):L(b.j7({type:R}))},tabIndex:0,className:S.YZ},n.createElement("div",null,Z.name),n.createElement(g.B,{svg:N.A,width:"8px",autosize:!0})),V.current&&W?.type===R&&n.createElement(k.Cf,{showPoint:!1,targetRect:V.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(M).map(e=>n.createElement(d.MM,{key:e,onClick:()=>$(x[e]),checked:Z.guid===e},x[e].name))))),n.createElement(_.P,{hideScrollbar:!0,className:S.jG,innerClassName:S.hu,scrollContainerRef:X},""===B&&n.createElement(P,{pageNode:Z,nodes:M[Z.guid]||[],thumbnailByGuid:ei,selectedNodeGuids:Q,toggleSelectNode:eo,observe:el}),""!==B&&(null===H?n.createElement("div",{className:S.Do},n.createElement(u.kt,{size:"large"})):Object.entries(H).length>0?Object.entries(H).map(([e,t])=>n.createElement(P,{key:e,pageNode:x[e],nodes:t,thumbnailByGuid:ei,selectedNodeGuids:Q,toggleSelectNode:eo,showCollapsibleHeader:!0,observe:el})):n.createElement("div",{className:S.Lp},n.createElement("div",null,(0,f.tx)("fig_feed.no_frames_matching",{searchQuery:n.createElement(n.Fragment,null,n.createElement("span",{className:S.ZF},B))})))))):null}},573666:(e,t,a)=>{a.d(t,{i:()=>d});var n=a(411855),l=a(57860),i=a(629019),r=a.n(i),o=a(563706),s=a(946689),c=a(939863),m=a(554905);function d({children:e,isInsertingTemplate:t,shouldUseOpaqueBackground:a=!1,insertTemplate:i}){let d=(0,m.Td)(),u=d?(0,c.t)("browse_templates_modal.add_template.disabled"):"";return n.createElement(s.$$,{className:r()("insert_template_cta--button--InTLP",a&&"insert_template_cta--buttonOpaque--oEwuq"),onClick:o.Ay.isIpad?void 0:i,onPointerDown:o.Ay.isIpad?i:void 0,disabled:t||d,"data-not-draggable":!0,title:u},n.createElement("span",{style:{visibility:t?"hidden":"visible"}},e),t&&n.createElement("span",{className:"insert_template_cta--spinner--xtwmE"},n.createElement(l.k,{size:"md"})))}},637724:(e,t,a)=>{a.d(t,{PH:()=>eg});var n,l=a(411855),i=a(188507),r=a(140593),o=a(3360),s=a(288006),c=a(862350),m=a(951792),d=a(115630),u=a(629019),p=a.n(u),_=a(939863),h=a(672517),g=a(178323),f=a(965480),b=a(777078),E=a(988022),v=a(335682),w=a(820642),y=a(106112),I=a(555328),C=a(809073),k=a(237870),T=a(463033),S=a(128765),F=a(927625),N=a(686046),x=a(75395),L=a(474774),A=a(154254),P=a(931828),R=a(309798),M=a(292954);let D="_team_templates_browse",B="seen_figjam_make_tmpl_category";function O({selectedCategory:e,selectCategory:t,categoryTitles:a,categoryIds:n,triggeredFrom:r,makeSomethingCategoryId:o,subcategories:s}){let c=(0,i.wA)(),m=(0,v.tS)(),d=(0,f.Gi)(),u=(0,R.f)("figjam_editor_onboarded"),p=(0,R.f)(B),h=n.filter(e=>s.every(t=>!t.categoryIds.includes(e)));(0,l.useEffect)(()=>{"makeSomething"!==r&&u&&!p&&(t(o),c(P.b({[B]:!0})))},[c,u,p,o,t,r]);let g=e=>{t(e),(0,E.Cu)({fileKey:m,categoryName:e},"template_modal_category_selected")},b=t=>t.map(t=>{let n=a[t];return n?l.createElement(U,{key:t,text:n,isSelected:e===t,onClick:()=>g(t)}):null});return l.createElement("div",{className:M.pz},l.createElement(U,{text:(0,_.t)("browse_templates_modal.all_templates"),onClick:()=>t(void 0),isSelected:!e}),d&&l.createElement(l.Fragment,null,l.createElement(U,{text:(0,_.t)("browse_templates_modal.header_name_templates",{entityName:d.name||""}),onClick:()=>g(D),isSelected:e===D,"data-testid":"org-templates"})),b(h),s.map(e=>l.createElement("div",{key:e.id},l.createElement("div",{className:A.cx.minH16.p0.$}),l.createElement("div",{className:M.vC},e.title),b(e.categoryIds))),l.createElement("div",{className:A.cx.minH8.$}),l.createElement("span",{className:M.D5},l.createElement(L.U,{className:M.wP}),l.createElement(N.N,{href:"/community/figjam",newTab:!0,onClick:()=>{(0,E.Cu)({fileKey:m,uiSelectedView:"browse_more_sidebar_link",name:"Templates Modal Browse More"},"cta_clicked")}},(0,_.tx)("browse_templates_modal_sidebar.see_more_in_community"))))}function U(e){return l.createElement(x.E,{className:e.isSelected?M.X6:M.Mo,onClick:e.onClick},e.text)}O.displayName="BrowseTemplatesModalSidebar",U.displayName="TemplatesPickerSidebarItem";var z=a(540292),G=a(630028);function j(e){let t=(0,f.tS)(),a=(0,i.d4)(e=>e.hubFiles),n=(0,v.tS)(),r=l.useMemo(()=>Z(e.templates),[e.templates]),o=l.useRef(null);l.useEffect(()=>{o.current?.scrollTo(0,0)},[e.selectedCategory]);let s=null;if(e.selectedCategory){let t=(e.templates[e.selectedCategory]||[]).map(e=>a[e]);s=l.createElement(W,{templates:t.filter(e=>!!e).map(e=>({template:e,type:y.n.HubFile})),categoryTitle:e.categoryTitles[e.selectedCategory],category:e.selectedCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}else s=l.createElement(l.Fragment,null,l.createElement(G.O9,{key:"team_template_announcement"}),t&&l.createElement(H,{onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory}),e.categoryIds.map(t=>{let n=(r[t]||[]).map(e=>a[e]).filter(e=>!!e);return l.createElement(W,{key:`templates_category_preview:${t}`,category:t,categoryTitle:e.categoryTitles[t],templates:n.map(e=>({template:e,type:y.n.HubFile,category:t})),templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}));return l.createElement("div",{className:M.rb,ref:o},s,l.createElement(z.tJ,{url:e.enterCommunityUrl,fileKey:n||null}))}function H(e){let{teamTemplates:t,isLoading:a}=(0,f.wv)(3),n=(0,f.Gi)();return n?a?l.createElement(l.Fragment,null,l.createElement(z.G3,null),l.createElement(z.G3,null),l.createElement(z.G3,{shouldFade:!0})):t?.length?l.createElement(W,{category:D,categoryTitle:(0,_.t)("browse_templates_modal.header_name_templates",{entityName:n.name}),templates:t,selectCategory:e.selectCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}):null:null}function W(e){let t=e.selectCategory;return l.createElement("div",{className:M.xQ},l.createElement("div",{className:M.w0},l.createElement("div",{className:M.$I},e.categoryTitle),t&&l.createElement(T.$n,{variant:"link",onClick:()=>t(e.category)},(0,_.tx)("browse_templates_modal.see_all"))),l.createElement(V,{templates:e.templates,templateInsertionLocation:e.templateInsertionLocation,previewHubFile:e.previewHubFile,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}))}function V(e){let t=(0,S.fG)(),{previewHubFile:a}=e;return l.createElement(z.iq,null,e.templates.map(n=>{let{primaryKey:i}=t(n);return l.createElement(z.AF,{key:i,template:n,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.onInsertTemplate(n),isInsertingTemplate:e.isInsertingTemplate(i),onPreview:n.type===y.n.HubFile&&a?()=>a(n.template.id):void 0})}),l.createElement(F.hT,{numResources:e.templates.length,maxResources:3}))}j.displayName="BrowseTemplatesModalContent",W.displayName="TemplatesPickerCategorySection";let Z=(e,t=3)=>{let a={};return Object.keys(e).forEach(n=>{e[n]&&(a[n]=e[n].slice(0,t))}),a};var $=a(812115),Y=a(563042),K=a(637590),Q=a(214940),q=a(240837),J=a(860178),X=a(837746);(e=>{function t(e){return l.createElement("div",{className:"resource_detail_view_header--subtitleContainer--G4iVj"},e.children)}e.SmallStickyTopBar=function(e){let a=(0,J.iZ)()?{}:{top:X.avG};return l.createElement("div",{className:e.className||"resource_detail_view_header--headerContainer_Small--GNjXr resource_detail_view_header--headerContainerBase--noQIf",style:a},l.createElement("div",{className:"resource_detail_view_header--headerElementsContainer_Small--7d4Dl resource_detail_view_header--headerElementsContainerBase--Bkwye detail_view--container--5uafb detail_view--_container--9sCA7 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},l.createElement("div",{className:"resource_detail_view_header--headerLeft--3evKW"},l.createElement("div",{className:"resource_detail_view_header--titleContainer--D1-zT"},l.createElement("h1",{className:"resource_detail_view_header--nameShrunk--djxg3 text--fontPos18--rYXJb text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.name),e.titleBadge),l.createElement(t,null,l.createElement("div",{className:"resource_detail_view_header--subtitleItem--Wtt2d text--fontPos13--xW8hS text--_fontBase--QdLsd"},l.createElement(q.L,{publishers:e.resource.community_publishers.accepted}),l.createElement(q.I,{publishers:e.resource.community_publishers.accepted})))),l.createElement("div",{className:"resource_detail_view_header--headerRight--HScUW detail_view--headerRight--nsyNm"},l.createElement("div",{className:"resource_detail_view_header--secondaryCTAContainer--iNAnz detail_view--likesContainer--LC17P"},e.secondaryCTAButton),l.createElement("div",{className:"resource_detail_view_header--rowReverse--Fl6Zv detail_view--rowReverse---FVgL"},e.mainCTAButton))))}})(n||(n={}));var ee=a(573666);function et(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.hubFiles),r=a[e.templateId],o=(0,w.a6)(r);if(!r)return null;let s=l.createElement(ee.i,{insertTemplate:()=>e.insertTemplate({type:y.n.HubFile,template:r}),isInsertingTemplate:e.isInsertingTemplate},(0,w.Ve)(e.templateInsertionLocation)),c=e.moreTemplateIds.filter(t=>t!==e.templateId).map(e=>a[e]);return l.createElement("div",{className:"browse_templates_modal_resource_preview--resourcePreview--xsc-T"},l.createElement(n.SmallStickyTopBar,{resource:r,name:o.name,mainCTAButton:s,secondaryCTAButton:l.createElement(l.Fragment,null),className:"browse_templates_modal_resource_preview--headerContainer--SGsCX",openCreatorsInNewTab:!0}),l.createElement("div",{className:"browse_templates_modal_resource_preview--container--FlTtG hub_file_detail_view--container--wjAfD"},l.createElement("div",{className:"browse_templates_modal_resource_preview--embedContainer--ONcnZ hub_file_detail_view--embedContainer--QMuUr detail_view--embedContainer---TcbF"},l.createElement(Q.Z,{key:r.id,hubFile:r,profileIdToAdminResourceAs:null,fullscreenState:K.G4.DEFAULT,dispatch:t,containerClassName:"browse_templates_modal_resource_preview--embedContainerInner--Bu6RJ hub_file_detail_view--iframeContainer---uQYN",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,fixedSize:!0})),l.createElement("div",{className:"browse_templates_modal_resource_preview--metadataContainer--GipYm"},l.createElement("div",{className:"browse_templates_modal_resource_preview--description--EuZxv"},(0,Y.$J)(o.description).trim().length>0&&l.createElement($.R,{fallback:null,errorFallback:null,value:o.description}),l.createElement("div",{className:A.cx.mt16.$},l.createElement(N.N,{href:`/community/file/${e.templateId}`,newTab:!0},(0,_.tx)("browse_templates_modal.see_more_details_in_community")))),l.createElement("div",{className:"browse_templates_modal_resource_preview--moreTemplatesHeader--Kz1a1 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("browse_templates_modal.more_templates_like_this")),l.createElement("div",{className:"browse_templates_modal_resource_preview--moreTemplatesGrid--LqGIO"},c.slice(0,6).map(t=>l.createElement(z.Pr,{hubFileId:t.id,key:t.id,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.insertTemplate({type:y.n.HubFile,template:t}),isInsertingTemplate:e.isInsertingTemplate,previewHubFile:()=>e.selectTemplate(t.id)}))))))}et.displayName="BrowseTemplatesModalResourcePreview";var ea=a(428322),en=a(396040),el=a(99506),ei=a(117688);function er({searchQuery:e,hubFileResultIds:t,isInsertingTemplate:a,onInsertTemplate:n,onPreviewHubFileTemplate:i}){let r=(0,v.tS)(),o=l.useRef(null),s=(0,f.tS)(),[c,m]=(0,l.useState)(!s),{templates:d,requestLoadMore:u,isLoading:p}=(0,b.Ou)(e,s,el._Y.WHITEBOARD);(0,l.useEffect)(()=>{m(!s),"function"==typeof o.current?.scroll&&o.current.scroll({top:0,behavior:"smooth"})},[e,s]);let h=`/community/search?resource_type=files&editor_type=figjam&query=${e}`;return 0!==t.length||0!==d.length||p?p&&0===d.length?l.createElement(z.Cm,null):l.createElement("section",{className:A.cx.wFull.p24.overflowYScroll.$,ref:o},l.createElement(z.iq,null,s&&d.map(e=>l.createElement(z.AF,{key:`team-template-${e.file_key}`,template:{template:e,type:y.n.TeamTemplate},isInsertingTemplate:a(e.file_key),onInsert:()=>n({template:e,type:y.n.TeamTemplate})})),c&&t.map(e=>l.createElement(z.Pr,{key:`hub-file-template-${e}`,hubFileId:e,onInsert:n,isInsertingTemplate:a(e),previewHubFile:()=>i(e)}))),s&&!p&&l.createElement(ea.a,{onIntersectionChange:({isIntersecting:e})=>{e&&!u()&&m(!0)}}),!p&&l.createElement("div",{className:A.cx.mt24.$},l.createElement(z.tJ,{url:h,fileKey:r}))):l.createElement(en._3,{illustration:ei.A,resourceTypeDisplayString:"templates",query:e,cta:l.createElement(N.N.Button,{href:h,newTab:!0,variant:"secondary"},(0,_.tx)("browse_templates_modal.browse_more_in_community"))})}var eo=a(343887),es=a(755020),ec=a(32863);function em(e){return l.createElement(s.Y9,null,e.previewTemplateId?l.createElement(eo.K,{"aria-label":(0,_.t)("general.back"),onClick:e.goBack},l.createElement(es.C,null)):l.createElement(ec.IW,{query:e.searchQuery,clearSearch:()=>e.setSearchQuery(""),onChange:e.setSearchQuery,className:M.ON,placeholder:(0,_.t)("browse_templates_modal.search_templates"),focusOnMount:!0}))}em.displayString="BrowseTemplatesModalTopBar";var ed=a(305694),eu=a(119101),ep=a(79132);function e_(e){let t;let{onTemplateInsertedCurrentFile:a,onTemplateInsertedNewFile:n,onClose:c}=e,m=l.useRef(null),{templates:d,categoryTitles:u,duplicateFile:h,fileKey:E,searchQuery:v,searchTemplatesResult:k,setSearchQuery:T,categoryIds:S,subcategories:F}=(0,ep.bg)({source:"browse-templates-modal"}),{templates:N,categoryIds:x}=(0,ep.bg)({templatesShelfType:I.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),L={...N,...d},A=(0,f.Gi)(),P={};x.reduce((e,t)=>(e[t]=(0,_.t)("browse_templates_modal_sidebar.get_started"),e),P);let R={...u,...P},[B,U]=l.useState(),[z,G]=l.useState(),H=(0,o.Im)(L),W=B&&Object.values(L).find(e=>e.includes(B))||[],{insertTemplate:V,isInsertingTemplate:Z}=(0,b.Fz)(),$=(0,i.d4)(e=>B?e.hubFiles[B]:null),Y=l.useCallback(()=>{a?a():c()},[a,c]);l.useEffect(()=>{let t=S.filter(t=>u[t]===e.initiallySelectedCategoryTitle);1===t.length&&G(t[0])},[S,u,e.initiallySelectedCategoryTitle]),l.useEffect(()=>{m.current?.scrollTo(0,0),B&&$&&(0,g._)("resource_previewed",{fileKey:E,resourceType:"template",resourceName:(0,w.a6)($).name,resourceId:B,triggeredFrom:"browse-templates-modal",templateType:y.n.HubFile})},[B,E,$]);let K=!v,Q=(0,b.b4)(),q=(0,b.WS)(),J=e=>Z(e)||q(e),X=t=>{if(e.templateInsertionLocation===w.RD.CURRENT_FILE)V({template:t,onSuccess:Y,triggeredFrom:"browse-templates-modal"});else{switch(t.type){case y.n.HubFile:h(t.template.id);break;case y.n.TeamTemplate:Q({templateIdentifier:{type:C.vt.TeamTemplate,file_key:t.template.file_key},templateName:t.template.name,openInNewTab:!0});break;case y.n.TeamTemplateLg:Q({templateIdentifier:{type:C.vt.TeamTemplate,file_key:t.template.fileKey},templateName:t.template.name,openInNewTab:!0});break;default:(0,r.xb)(t)}n?.()}};if(B)t=l.createElement(et,{templateId:B,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:X,isInsertingTemplate:J(B),moreTemplateIds:W,selectTemplate:U}),K=!1;else if(v)t=l.createElement(er,{searchQuery:v,hubFileResultIds:k,isInsertingTemplate:J,onInsertTemplate:X,onPreviewHubFileTemplate:U});else if(z===D)switch(A?.type){case"org":t=l.createElement(ed.yB,{insertTemplate:X,isInsertingTemplate:J,templateInsertionLocation:e.templateInsertionLocation});break;case"team":t=l.createElement(eu.z,{teamId:A.entity.id,teamName:A.name,onInsert:X,isInsertingTemplate:J,templateInsertionLocation:e.templateInsertionLocation});break;default:t=l.createElement(l.Fragment,null)}else t=H?l.createElement(l.Fragment,null):l.createElement(j,{templates:L,categoryIds:S,categoryTitles:R,selectedCategory:z,selectCategory:G,enterCommunityUrl:"/community/figjam",templateInsertionLocation:e.templateInsertionLocation,previewHubFile:U,onInsertTemplate:X,isInsertingTemplate:J});return l.createElement(s.Wk,{className:p()({[M.hW]:"newFile"===e.triggeredFrom})},l.createElement(em,{searchQuery:v,setSearchQuery:T,previewTemplateId:B,goBack:()=>U(void 0)}),l.createElement("div",{className:M.jE,ref:m},K&&l.createElement(O,{categoryIds:S,categoryTitles:R,selectedCategory:z,selectCategory:G,makeSomethingCategoryId:x[0]??"",triggeredFrom:e.triggeredFrom,subcategories:F}),t))}function eh(e){let{properties:t,name:a}=(0,h.j6)(),{onClose:n}=e,i=l.useCallback(()=>{n(),(0,E.Cu)({...t,trackingContext:a,text:"Templates Close Button"})},[t,a,n]),r=c.hS({...e,onClose:i});return l.createElement(d.v,{mode:"whiteboard"},l.createElement(m.bL,{width:888,manager:r},l.createElement(e_,{...e})))}let eg=(0,k.Ju)(function(e){let t=(0,v.tS)();return l.createElement(h.fu,{name:"template_modal_shown",properties:{fileKey:t,source:e.triggeredFrom}},l.createElement(eh,{...e}))},"BrowseTemplatesModal")},540292:(e,t,a)=>{a.d(t,{AF:()=>D,Cm:()=>V,G3:()=>W,Kt:()=>H,Pr:()=>B,iq:()=>P,mS:()=>R,tJ:()=>O});var n=a(411855),l=a(188507);if(443==a.j)var i=a(140593);if(443==a.j)var r=a(543509);if(443==a.j)var o=a(57860);if(443==a.j)var s=a(686046);var c=a(629019),m=a.n(c),d=a(983405),u=a(737947),p=a(915440);if(443==a.j)var _=a(860601);var h=a(268537),g=a(154254),f=a(939863),b=a(970516),E=a(738269),v=a(988022),w=a(128765),y=a(27703),I=a(318812),C=a(820642),k=a(279453),T=a(106112),S=a(610732),F=a(554905),N=a(573666),x=a(927625),L=a(79132),A=a(292954);function P(e){return n.createElement("div",{className:A.sk},e.children)}function R({template:e}){let t=(0,I.Um)(),{primaryKey:a}=(0,w.fG)()(e);return t?.type===L.hx&&t?.data?.templatePrimaryKey===a&&t.data?.position?n.createElement(M,{template:e,position:t.data.position}):null}function M({template:e,position:t}){let a=(0,l.wA)(),{viewSourceFileUrl:i,duplicateLink:r,primaryKey:s}=(0,w.fG)()(e),c=e.type===T.n.TeamTemplate,m=(0,p.Rs)(k.sMs,{key:s},{enabled:c});return n.createElement(h.ms,{style:{...t,position:"fixed"}},n.createElement(h.c$,{onClick:()=>{a(E.oB()),a(b.S({url:r}))}},(0,f.tx)("browse_templates_modal.context_menu.copy_link")),i&&c&&n.createElement(h.c$,{onClick:()=>{a(E.oB()),u.Ay.redirect(i,"_blank")},disabled:"loading"===m.status||"disabled"===m.status||!m.data?.file?.hasPermission},n.createElement(d.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8},n.createElement("span",null,(0,f.tx)("browse_templates_modal.context_menu.view_original_file")),n.createElement("span",{className:g.cx.if("loading"!==m.status,g.cx.invisible).$},n.createElement(o.k,null)))))}function D(e){let{clientMeta:t,imageUrl:a,thumbnailIsSet:l,isWhiteboard:i,name:r,publishers:o,hubFileId:s,resizedThumbnailUrls:c}=(0,w.fG)()(e.template),m=(0,L.jq)(e.template),d=(0,F.Td)();return n.createElement(n.Fragment,null,n.createElement(S.zq,{onContextMenu:m,image:n.createElement(S.FK,{backgroundColor:(0,y.Cn)(t)},n.createElement(S.zx.Cover,null,n.createElement("button",{className:A.n_,onClick:e.onInsert,disabled:e.isInsertingTemplate||d})),n.createElement(S.zx.Center,null,n.createElement(N.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,C.Ve)(e.templateInsertionLocation))),n.createElement(x.Ho,{image:a,isSet:l,isWhiteboard:i,hubFileId:s,alt:r,resizedThumbnailUrls:c})),bottomRow:n.createElement(S.Wf.FullMetadata,{name:r,publishers:o,hoverText:e.onPreview?(0,f.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview||_.lQ})}),n.createElement(R,{template:e.template}))}function B(e){let t=(0,l.d4)(t=>t.hubFiles[e.hubFileId]);return n.createElement(D,{template:{template:t,type:T.n.HubFile},onInsert:()=>e.onInsert({template:t,type:T.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function O({url:e,fileKey:t}){return n.createElement(s.N.Button,{href:e,newTab:!0,onClick:()=>{(0,v.Cu)({fileKey:t,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")},variant:"secondary"},(0,f.tx)("browse_templates_modal_content.see_more_in_community"))}function U(){return n.createElement("div",{className:g.cx.flex.itemsCenter.h40.my8.wFull.$},n.createElement(z,null))}function z(){return n.createElement("div",{className:m()(g.cx.w100.h16.bRadius3.$,A.Mm)})}function G({lightness:e="normal"}){let t=function(e){switch(e){case"normal":return A.Mm;case"light":return A.EQ;case"lightest":return A.Y;default:(0,i.xb)(e)}}(e);return n.createElement(S.zq,{image:n.createElement(S.FK,{removeBorder:!0},n.createElement("div",{className:m()(t,g.cx.wFull.hFull.$)})),bottomRow:n.createElement("div",{className:m()(t,g.cx.h16.w100.bRadius3.$)})})}function j({shouldFade:e}){return n.createElement(n.Fragment,null,(0,r.y1)(3).map(t=>{let a="normal";return e&&(a=2===t?"lightest":1===t?"light":"normal"),n.createElement(G,{key:t,lightness:a})}))}function H(){return n.createElement("div",{className:g.cx.px24.$},n.createElement(U,null),n.createElement(P,null,n.createElement(j,null),n.createElement(j,null),n.createElement(j,{shouldFade:!0})))}function W({shouldFade:e}){return n.createElement("div",{className:g.cx.pb20.$},n.createElement("div",{className:g.cx.h24.mb16.$},n.createElement(z,null)),n.createElement(P,null,n.createElement(j,{shouldFade:e})))}function V(){return n.createElement(d.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center"},n.createElement(o.k,{size:"lg"}))}},630028:(e,t,a)=>{a.d(t,{Ht:()=>f,O9:()=>b});var n=a(411855),l=a(188507),i=a(286640),r=a(154254),o=a(468557),s=a(939863),c=a(600904),m=a(931828);if(443==a.j)var d=a(291099);var u=a(965480),p=a(309798),_=a(734366);let h="team_template_card_view_count",g=()=>{if(!i.x4)return;let e=parseInt(i.x4.getItem(h)||"0");i.x4.setItem(h,""+ ++e)};function f({fullWidth:e=!1}){return n.createElement("div",{className:r.cx.flex.flexColumn.itemsCenter.mxAuto.gap12.alignCenter.justifyCenter.$,style:{width:e?"100%":"360px",paddingTop:"100px"}},n.createElement("div",null,n.createElement(_.$z,{size:_.IX.MEDIUM,useCurrentFileAsThumbnail:!1})),n.createElement("div",{className:r.cx.font13.fontSemiBold.$},(0,s.tx)("whiteboard.inserts.custom_templates_header")),n.createElement("div",null,(0,s.tx)("whiteboard.inserts.custom_templates_description")),n.createElement(o.pW,{newTab:!0,href:d.A},(0,s.tx)("whiteboard.inserts.learn_more")))}function b({applyInsertStyling:e,applyNarrowStyling:t}){let a=(0,p.f)("dismissed_team_template_announcement_card"),r=(0,l.wA)(),o=(0,u.tS)(),s=(0,n.useCallback)(()=>{r(m.b({dismissed_team_template_announcement_card:!0})),localStorage.removeItem(h)},[r]),c=parseInt(i.x4?.getItem(h)||"0");return((0,n.useEffect)(()=>{!a&&c>=10&&s()},[a,c,s]),o&&c<10&&!a)?n.createElement(E,{applyInsertStyling:e,applyNarrowStyling:t,onDismiss:s}):null}function E({applyInsertStyling:e,applyNarrowStyling:t,onDismiss:a}){return(0,n.useEffect)(()=>{g()},[]),n.createElement("div",{className:r.cx.bRadius5.flex.flexRow.itemsStart.gap12.itemsCenter.p18.colorBgSecondary.mb20.if(e,r.cx.m24).if(t,r.cx.m12.p12.pt16.mb12).$,"data-testid":"teamplates-announcement-card"},n.createElement("div",null,n.createElement(_.$z,{size:t?_.IX.SMALL:_.IX.MEDIUM,useCurrentFileAsThumbnail:!1})),n.createElement("div",{className:r.cx.flex.flexColumn.justifyBetween.$},n.createElement("div",{className:r.cx.font13.fontSemiBold.pb8.$},(0,s.tx)("whiteboard.inserts.custom_templates_header")),n.createElement("div",null,(0,s.tx)("whiteboard.inserts.custom_templates_description")),n.createElement("div",{className:r.cx.flex.gap8.pt16.$},n.createElement(o.pW,{newTab:!0,href:d.A},(0,s.tx)("whiteboard.inserts.learn_more")),n.createElement(c.V,{onClick:a},(0,s.tx)("whiteboard.inserts.dismiss")))))}},305694:(e,t,a)=>{a.d(t,{DL:()=>N,Z0:()=>L,fc:()=>x,yB:()=>A});var n=a(411855),l=a(561546),i=a(629019),r=a.n(i),o=a(966712),s=a(268537),c=a(428322),m=a(163023),d=a(154254),u=a(939863),p=a(175290),_=a(965480),h=a(694687),g=a(99506),f=a(643067),b=a(106112),E=a(383986),v=a(143678),w=a(630028),y=a(540292),I=a(119101);if(443==a.j)var C=a(348787);var k=a(235027),T=a(292954);if(443==a.j)var S=a(949207);if(443==a.j)var F=a(432023);function N({filterOptions:e,selectedIds:t,isMyTeamsOnly:a,onFilterChange:i,userTeamOrWorkspaceIds:r,showWorkspaces:o,rightAlignOptions:c=!0}){let m=new Set(t||e.map(e=>e.id)),h=[],g=[],f=[],b=!1;for(let t of e)m.has(t.id)&&f.push(t),(0,_.qI)(t)?b=!0:r.has(t.id)?h.push(t):g.push(t);(0,l.KQ)(h,"name"),(0,l.KQ)(g,"name");let w=h.filter(e=>m.has(e.id)),y=g.filter(e=>m.has(e.id)),I=function({filterOptionsCount:e,userMemberFilterOptionsSelected:t,userNonMemberFilterOptionsSelected:a,isMyTeamsOnly:n,showWorkspaces:l,unassignedTeamsSelected:i}){let r=[...t,...a],o=r.length+(i?1:0);return 0===o?(0,u.t)("browse_templates_modal.none_selected"):o===e?l?n?(0,u.t)("browse_templates_modal.my_teams_only"):(0,u.t)("browse_templates_modal.all_workspaces"):(0,u.t)("browse_templates_modal.all_teams"):1===o?i?(0,u.t)("browse_templates_modal.other_teams"):r[0].name:(0,u.t)("browse_templates_modal.first_name_count_more",{count:o-1,firstName:r[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:w,userNonMemberFilterOptionsSelected:y,showWorkspaces:o,isMyTeamsOnly:a,unassignedTeamsSelected:m.has(E.s)}),C=(e,t)=>{i({ids:e?f.reduce((e,a)=>a.id===t.id?e:[...e,a.id],[]):[...f.map(e=>e.id),t.id],myTeamsOnly:a})},k=(e,t)=>{let n=new Set(m);e.forEach(e=>{t?n.add(e.id):n.delete(e.id)}),i({ids:Array.from(n),myTeamsOnly:a})},T=[];if(o){if(T.push(...[...h,...g].filter(e=>!!e.id).map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{C(t,e)},displayType:s.Jn.Checkbox},e.name)})),T.length&&T.unshift(n.createElement(s.wv,{key:"my-teams-only-separator"})),T.unshift(n.createElement(s.rr,{key:"my-teams-only",checked:a,onClick:()=>i({ids:t,myTeamsOnly:!a}),displayType:s.Jn.Checkmark},(0,u.tx)("browse_templates_modal.my_teams_only"))),b){let e=m.has(E.s);T.push(n.createElement(s.wv,{key:"unassigned-teams-separator"}),n.createElement(s.rr,{key:"unassigned-teams",checked:e,onClick:()=>{C(e,{id:E.s})},displayType:s.Jn.Checkbox},(0,u.tx)("browse_templates_modal.other_teams")))}}else h.length>0&&T.push(n.createElement(s.rr,{displayType:s.Jn.Checkbox,key:"my-teams",checked:h.length===w.length,mixed:h.length>w.length&&w.length>0,onClick:()=>{k(h,w.length<h.length)}},(0,u.tx)("browse_templates_modal.my_teams"))),T.push(...h.map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{C(t,e)},displayType:s.Jn.Checkbox,nested:!0},e.name)})),h.length>0&&g.length>0&&T.push(n.createElement(s.wv,{key:"other-teams-separator"})),g.length>0&&T.push(n.createElement(s.rr,{key:"other-teams",displayType:s.Jn.Checkbox,checked:g.length===y.length,mixed:g.length>y.length&&y.length>0,onClick:()=>{k(g,y.length<g.length)}},(0,u.tx)("browse_templates_modal.all_others"))),T.push(...g.map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{C(t,e)},displayType:s.Jn.Checkbox,nested:!0},e.name)}));return T.length?n.createElement(p.Y,{spacing:0,width:"hug-contents"},n.createElement("span",{className:d.cx.colorTextSecondary.$},(0,u.tx)("browse_templates_modal.published_from")),n.createElement(s.Ve,{label:I,noBorder:!0,rightAlignOptions:c,stayOpenOnSelect:!0,optionsBelowSelector:!0,options:T,notDraggable:!0,noRightPadding:!0,menuTrackingContextName:v.e0.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:o}})):null}function x(e){let[t,a]=(0,n.useState)(!0),l=(0,n.useRef)(null),i=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{!0!==i.current||t||l.current?.scrollIntoView()},[t]),n.createElement("section",null,n.createElement("button",{className:r()(d.cx.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,T.MY),onClick:()=>a(!t),ref:l},n.createElement("h2",null,n.createElement(m.B,{className:d.cx.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:t?S.A:F.A}),e.workspaceName&&n.createElement("span",{className:d.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName)),t&&n.createElement(n.Fragment,null,n.createElement("div",{className:d.cx.if(e.minimalSpacing,d.cx.px0.mb0,d.cx.px24.mb20).$},e.children),n.createElement(c.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:t})=>{t&&e.onRequestLoadMoreForTeam(e.teamId)}})),n.createElement(c.a,{onIntersectionChange:({isIntersecting:e})=>{i.current=e}}))}function L(e){return n.createElement("section",null,n.createElement("div",{className:r()(d.cx.borderBox.$,k.a0)},n.createElement("div",{className:k.bV},e.workspaceName&&n.createElement("span",{className:d.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName),e.onSeeAllClick&&n.createElement("button",{className:k.jy,onClick:e.onSeeAllClick},(0,u.tx)("whiteboard.inserts.see_all"))),n.createElement("div",{className:d.cx.if(e.minimalSpacing,d.cx.px0.mb0,d.cx.px24.mb20).$},e.children))}function A(e){let t=(0,n.useRef)(null),a=(0,h.sZ)(),l=(0,f.G7)(a),{filterOptions:i,selectedTeamOrWorkspaceOrLicenseGroupIds:r,isMyTeamsOnly:s,onFilterChange:m,requestLoadMore:E,requestLoadMoreForTeam:v,templatesByTeam:k,userTeamOrWorkspaceIds:T,isLoadingTeamTemplates:S}=(0,_.GR)(a,g._Y.WHITEBOARD),F=(0,o.kc)().pro_templates_lg;F&&k.forEach(e=>{e.templates.length>6&&(e.templates=e.templates.slice(0,6))});let[A,P]=(0,n.useState)(null);return A?n.createElement(I.z,{teamId:A.teamId,teamName:A.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>P(null)}):n.createElement("div",{className:d.cx.wFull.$},n.createElement(p.Y,{horizontalAlignItems:"space-between",height:C.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default"},n.createElement("div",{className:d.cx.font13.fontMedium.$},(0,u.tx)("browse_templates_modal.published_by_current_org_name",{orgName:a.name})),n.createElement(N,{filterOptions:i,selectedIds:r,isMyTeamsOnly:s,onFilterChange:e=>{"function"==typeof t.current?.scroll&&t.current.scroll({top:0,behavior:"smooth"}),m(e)},userTeamOrWorkspaceIds:new Set(T),showWorkspaces:l})),0===k.length?S?n.createElement(y.Kt,null):n.createElement(w.Ht,null):n.createElement("section",{className:d.cx.overflowYScroll.$,ref:t,style:{height:`calc(100% - ${C.k}px)`}},k.map(({team_id:t,team_name:a,workspace_name:i,templates:r,total:o})=>{let s=n.createElement(y.iq,null,r.map(t=>n.createElement(y.AF,{templateInsertionLocation:e.templateInsertionLocation,key:t.file_key,template:{template:t,type:b.n.TeamTemplate},onInsert:()=>e.insertTemplate({template:t,type:b.n.TeamTemplate}),isInsertingTemplate:e.isInsertingTemplate(t.file_key)})));return F?n.createElement(L,{key:t,teamName:a,workspaceName:l?i:null,teamId:t,onSeeAllClick:o>6?()=>{P({teamId:t,name:a??""})}:void 0},s):n.createElement(x,{key:t,teamName:a,workspaceName:l?i:null,teamId:t,onRequestLoadMoreForTeam:v},s)}),n.createElement(c.a,{"data-testid":"load-more-teams",className:d.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&E()}})))}},119101:(e,t,a)=>{a.d(t,{z:()=>f});var n=a(411855);if(443==a.j)var l=a(343887);if(443==a.j)var i=a(755020);var r=a(563706),o=a(428322),s=a(154254),c=a(939863),m=a(175290),d=a(965480),u=a(99506),p=a(106112),_=a(630028),h=a(540292);if(443==a.j)var g=a(348787);function f({teamId:e,teamName:t,templateInsertionLocation:a,onInsert:f,isInsertingTemplate:b,onBackClick:E}){let{requestLoadMoreForTeam:v,templatesByTeam:w}=(0,d.li)({teamId:e,editorType:u._Y.WHITEBOARD});return w?n.createElement("div",{className:s.cx.wFull.$},n.createElement(m.Y,{horizontalAlignItems:"start",height:g.k,strokeWidth:{bottom:1},strokeColor:"default",padding:{left:24,right:24}},E&&n.createElement(l.K,{"aria-label":(0,c.t)("general.back"),actionOnPointerDown:r.Ay.isIpad,onClick:E},n.createElement(i.C,null)),n.createElement("div",{className:s.cx.font13.fontMedium.$},(0,c.tx)("browse_templates_modal.published_by_current_org_name",{orgName:t}))),n.createElement("section",{className:s.cx.overflowYScroll.$,style:{height:`calc(100% - ${g.k}px)`}},n.createElement("div",{className:s.cx.px24.my20.$},n.createElement(h.iq,null,w.templates.map(e=>n.createElement(h.AF,{templateInsertionLocation:a,key:e.fileKey,template:{template:e,type:p.n.TeamTemplateLg},onInsert:()=>f({template:e,type:p.n.TeamTemplateLg}),isInsertingTemplate:b(e.fileKey)})))),n.createElement(o.a,{className:s.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&v()}}))):n.createElement(_.Ht,null)}},79132:(e,t,a)=>{a.d(t,{hx:()=>E,jq:()=>v,bg:()=>b});var n=a(411855),l=a(188507),i=a(838516),r=a(966712);a(498750);var o=a(939863),s=a(384162),c=a(410424),m=a(738269);a(178323);var d=a(988022),u=a(128765),p=a(335682),_=a(820642);a(99506);var h=a(336599),g=a(463592);a(106112);var f=a(555328);function b(e){let{templatesShelfType:t,source:a}=e,m=(0,l.wA)(),[u]=n.useState(()=>new g.Ef([],{keys:["name"]})),b=t||f.cS.FIGJAM_TEMPLATES_PICKER,E=s.sz.loadingKeyForPayload({shelfType:b}),v=(0,h.oh)(E),w=(0,h.mC)(E),y=(0,l.d4)(e=>e.hubFiles),I=(0,l.d4)(e=>e.communityHub.shelves[b]),C=(0,p.tS)(),k=r.Ay().user_data?.id,[T,S]=n.useState(""),[F,N]=n.useState([]),x=n.useMemo(()=>(I||[]).reduce((e,t)=>({...e,[t.id]:t.shelf_content.map(e=>e.id)}),{}),[I]),L=n.useMemo(()=>(I||[]).reduce((e,t)=>({...e,[t.id]:(0,o.Yd)(t.i18n_meta.title,t.title)}),{}),[I]),A=n.useMemo(()=>(I||[]).map(({id:e})=>e),[I]),P=n.useCallback(e=>{let t=y[e],n=(0,_.a6)(t);m(c.rL({hubFileId:e,hubFileName:n.name||"this file",openInNewTab:!0,source:a}))},[m,y,a]);return n.useEffect(()=>{v||w||m(s.sz({shelfType:b}))},[m,w,v,b]),n.useEffect(()=>{let e=Object.keys(x).reduce((e,t)=>[...e,...x[t]],[]).map(e=>(0,_.a6)(y[e]));u.set(e)},[x,y,u]),n.useEffect(()=>{let e;T?(e=[...new Set(e=u.search(T).map(e=>e.hub_file_id))],(0,d.Cu)({userId:k,fileKey:C,entry_point:"templates_modal",scope:"Templates Modal",files:0,private_plugins:0,private_widgets:0,public_plugins:0,public_widgets:0,projects:0,teams:0,users:0},"search_query_result")):e=[],N(e)},[T,k,C,u]),{templates:x,categoryTitles:L,hubFiles:y,isLoading:v,duplicateFile:P,fileKey:C,userId:k,setSearchQuery:n.useCallback((0,i.s)(S,300),[]),searchQuery:T,searchTemplatesResult:F,categoryIds:A,subcategories:n.useMemo(()=>{if(!I)return[];let e={activity:(0,o.t)("browse_templates_modal.subcategory.activity"),role:(0,o.t)("browse_templates_modal.subcategory.role")},t=[];return I.forEach(a=>{if(!a.shelf_meta.category)return;let n=a.shelf_meta.category,l=t.find(e=>e.id===n);l?l.categoryIds.push(a.id):t.push({id:n,title:e[n]||n,categoryIds:[a.id]})}),t},[I])}}a(301400);let E="templates_context_menu";function v(e){let t=(0,l.wA)(),{primaryKey:a}=(0,u.fG)()(e);return n.useCallback(e=>{e.preventDefault();let n={templatePrimaryKey:a,position:{top:e.clientY,left:e.clientX}};t(m.j7({type:E,data:n}))},[t,a])}},348787:(e,t,a)=>{a.d(t,{k:()=>n});let n=56},954387:(e,t,a)=>{function n(){return null}a.d(t,{V:()=>i,Y:()=>l}),a(503457),a(894728),new(a(554630)).b({name:"litmus",dependencies:[],exports:[{glob:"components.ts",sideEffects:!1},{glob:"litmus_view_selector.ts",sideEffects:!1},{glob:"is_litmus.ts",sideEffects:!1}],friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off","@typescript-eslint/no-explicit-any":"off"}}});let l=n,i=n},813539:(e,t,a)=>{a.d(t,{OF:()=>i,e7:()=>n,oL:()=>l});let n=function(){return!1},l=function(){return!1},i=function(){return!1}},870232:(e,t,a)=>{function n(){return null}a.d(t,{BX:()=>o,S7:()=>c,YP:()=>i,lt:()=>l,mh:()=>s,rC:()=>r});let l=n,i=n,r=n,o=n,s=n,c=n},67048:(e,t,a)=>{a.d(t,{G:()=>m});var n=a(411855),l=a(629019),i=a.n(l),r=a(281381),o=a(154254),s=a(939863),c=a(498606);function m({location:e,overrideText:t,hoverStyleClassName:a,onMouseUp:l,onPointerUp:m}){let d=!!l||!!m,u=d?{dataTooltip:(0,s.t)("qa.learn_more"),dataTooltipType:c.Ib.TEXT,dataTooltipShowAbove:!0}:{};return n.createElement(r.Ex,{className:i()(o.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if(d,o.cx.cursorPointer).if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,o.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,o.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,o.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,o.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,o.cx.textBodySmall).$,a),color:r.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge"),onMouseUp:l,onPointerUp:m,...u})}}}]);

//# debugId=c94a3cfd-cc62-593b-a0dd-e6e1c3c94811

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/5a5da5eeb7d2b58bf6d2269b3b49ed80435ed78f/8693-907a51d463a26716.min.js.map